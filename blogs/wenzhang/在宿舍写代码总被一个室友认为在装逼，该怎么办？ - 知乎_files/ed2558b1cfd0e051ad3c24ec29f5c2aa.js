(function(a){with(a){
a.gD=function(b){if(C&&!Fb(9)){var c=m;try{c=b.parentNode}catch(d){}return!!c}return sc(b.ownerDocument.body,b)},a.hD=function(b,c){return b.$.h(c?b.FH:b.$C)};Sn.prototype.Tf=Z(67,function(){var b=this.br.body.createTextRange();b.moveToElementText(this.br.body);return this.xg(new Sn(b,this.br),j)});bo.prototype.Tf=Z(66,function(){return(!this.sa||gD(this.sa))&&(!this.pa||gD(this.pa))&&(!(C&&!Fb(9))||go(this).Tf())});
jo.prototype.Tf=Z(65,function(){var b=m;try{b=B.every(this.Rh(),function(b){return C?!!b.parentNode:sc(b.ownerDocument.body,b)})}catch(c){}return b});po.prototype.Tf=Z(64,function(){return B.every(Dn(this),function(b){return b.Tf()})});Kn.prototype.hj=Z(59,function(){return 3!=this.aa.nodeType?-1:this.aa==this.sa?this.Ca:0});no.prototype.hj=Z(58,s(0));ro.prototype.hj=Z(57,function(){return this.Vf[this.al].hj()});
Nn.prototype.Sd=Z(48,function(){var b=Sb(this.O.startContainer).v("div");b.appendChild(this.O.cloneContents());b=b.innerHTML;if(Fa(b,"<")||!this.isCollapsed()&&!Xa(b,"<"))return b;var c=this.rc(),c=1==c.nodeType?c:c.parentNode;return Tr(c.cloneNode(m)).replace(">",">"+b)});Sn.prototype.Sd=Z(47,function(){return this.O.htmlText});bo.prototype.Sd=Z(46,function(){return go(this).Sd()});jo.prototype.Sd=Z(45,function(){return this.Gg()});po.prototype.Sd=Z(44,function(){return B.map(Dn(this),function(b){return b.Sd()}).join("")});
Kn.prototype.fj=Z(43,function(){return 3!=this.aa.nodeType?-1:this.aa==this.pa?this.xa:this.aa.nodeValue.length});no.prototype.fj=Z(42,s(0));ro.prototype.fj=Z(41,function(){return this.Vf[this.al].fj()});Bn.prototype.cg=Z(40,function(b){this.isCollapsed()||this.Yc();return this.insertNode(b,j)});jo.prototype.cg=Z(39,function(b){b=this.insertNode(b,j);this.isCollapsed()||this.Yc();return b});
yn.prototype.restore=Z(38,function(b){this.If&&zn.log(ce,"Disposed SavedRange objects cannot be restored.",i);var c=this.gk();b||this.F();return c});ho.prototype.gk=Z(37,function(){return fo(this.vB,this.PJ,this.pD,this.XL)});oo.prototype.gk=Z(36,function(){for(var b=(this.Xa.length?Rb(this.Xa[0]):document).body.createControlRange(),c=0,d=this.Xa.length;c<d;c++)b.addElement(this.Xa[c]);return ko(b)});
so.prototype.gk=Z(35,function(){var b=B.map(this.qz,function(b){return b.restore()}),c=new po;c.gm=b;c.Qe=B.map(b,function(b){return b.Pd()});return c});Ln.prototype.Gg=Z(28,function(){var b=new Rr;Q.forEach(this,function(c,d,e){3==c.nodeType?b.append(Wa(c.nodeValue.substring(e.hj(),e.fj()))):1==c.nodeType&&(-1==e.$b?gc(c)&&b.append("</"+c.tagName+">"):(d=c.cloneNode(m),d=Tr(d),C&&"LI"==c.tagName?b.append(d):(c=d.lastIndexOf("<"),b.append(c?d.substr(0,c):d))))},this);return b.toString()});
bo.prototype.Gg=Z(27,function(){return go(this).Gg()});jo.prototype.Gg=Z(26,function(){return B.map(mo(this),Tr).join("")});po.prototype.Gg=Z(25,function(){return this.Sd()});hj.prototype.mi=Z(23,function(b,c){var d=b.zd(),e=this.L()+"-collapse-left",g=this.L()+"-collapse-right";b.aj(d?g:e,!!(c&1));b.aj(d?e:g,!!(c&2))});yj.prototype.mi=Z(22,function(b){this.K.mi(this,b)});An.prototype.mp=Z(18,function(){var b=this.Lc?-1:1;this.$b==b&&(this.$b=-1*b,this.depth+=this.$b*(this.Lc?-1:1))});
Kn.prototype.mp=Z(17,function(){Kn.n.mp.apply(this);sc(this.aa,this.pa)&&f(Q.$a)});Id.prototype.setInterval=Z(11,function(b){this.Mg=b;this.na&&this.enabled?(this.stop(),this.start()):this.na&&this.stop()});xq.prototype.Ew=Z(10,function(){return this.h().innerHTML});Jn.prototype.mh=Z(9,function(b,c){this.insertNode(b,j);this.insertNode(c,m)});
Nn.prototype.mh=Z(8,function(b,c){var d=ac(Rb(this.U()));if(d=uo(d))var e=d.U(),g=d.ea(),h=d.ra(),k=d.Ia();var n=this.O.cloneRange(),q=this.O.cloneRange();n.collapse(m);q.collapse(j);n.insertNode(c);q.insertNode(b);n.detach();q.detach();if(d){if(3==e.nodeType)for(;h>e.length;){h-=e.length;do e=e.nextSibling;while(e==b||e==c)}if(3==g.nodeType)for(;k>g.length;){k-=g.length;do g=g.nextSibling;while(g==b||g==c)}fo(e,h,g,k).select()}});
Sn.prototype.mh=Z(7,function(b,c){var d=this.O.duplicate(),e=this.O.duplicate();Yn(d,b,j);Yn(e,c,m);this.ne()});bo.prototype.mh=Z(6,function(b,c){go(this).mh(b,c);this.ne()});Nn.prototype.Yc=Z(5,function(){var b=this.O;b.extractContents();if(b.startContainer.hasChildNodes()&&(b=b.startContainer.childNodes[b.startOffset])){var c=b.previousSibling;""==Gc(b)&&N(b);c&&""==Gc(c)&&N(c)}});
Sn.prototype.Yc=Z(4,function(){if(!this.isCollapsed()&&this.O.htmlText){var b=this.U(),c=this.ea(),d=this.O.text,e=this.O.duplicate();e.moveStart("character",1);e.moveStart("character",-1);e.text==d&&(this.O=e);this.O.text="";this.ne();d=this.U();e=this.ra();try{var g=b.nextSibling;b==c&&(b.parentNode&&3==b.nodeType&&g&&3==g.nodeType)&&(b.nodeValue+=g.nodeValue,N(g),this.O=Un(d),this.O.move("character",e),this.ne())}catch(h){}}});bo.prototype.Yc=Z(3,function(){go(this).Yc();this.ne()});
jo.prototype.Yc=Z(2,function(){if(this.O){for(var b=[],c=0,d=this.O.length;c<d;c++)b.push(this.O.item(c));B.forEach(b,N);this.collapse(m)}});po.prototype.Yc=Z(1,function(){B.forEach(Dn(this),function(b){b.Yc()})});
a.iD=function(b,c){var d=c.jd();b.nd[d]&&b.Lb.log(ce,"Cannot register the same class of plugin twice.",i);b.nd[d]=c;for(var e in Xu)c[Xu[e]]&&b.uj[e].push(c);c.B=b;b.Td()&&c.enable(b)},a.jD=function(b){return b.B&&b.B.gb},a.kD=function(b){var c=b.aa.parentNode;return new Or(c,B.indexOf(c.childNodes,b.aa))},a.lD=function(b,c,d,e){return fo(b,c,d,e)},a.mD=function(b){O.call(this);this.FH=db();this.$C=db();this.$=Sb(b.Da());b.mh(this.$.v("SPAN",{id:this.FH}),this.$.v("SPAN",{id:this.$C}))};A(mD,yn);
mD.prototype.Qo=function(b){N(hD(this,j));N(hD(this,m));return b};mD.prototype.gk=function(){var b=l,c=hD(this,j),d=hD(this,m);if(c&&d){var b=c.parentNode,c=B.indexOf(b.childNodes,c),e=d.parentNode,d=B.indexOf(e.childNodes,d);e==b&&(d-=1);b=fo(b,c,e,d);b=this.Qo(b);b.select()}else this.Qo();return b};mD.prototype.w=function(){this.Qo();this.$=l};
a.nD=function(b){var c;if(3==b.aa.nodeType)for(c=b.aa.previousSibling;c&&3==c.nodeType;c=c.previousSibling)b.offset+=Pr(c);else c=b.aa.previousSibling;var d=b.aa.parentNode;b.aa=c?c.nextSibling:d.firstChild;return b},a.oD=function(b,c){return c?Qr(b.U(),b.ra()):Qr(b.ea(),b.Ia())},a.pD=function(b){for(var c=l,d=b.firstChild;d;){var e=d.nextSibling;3==d.nodeType?""==d.nodeValue?b.removeChild(d):c?(c.nodeValue+=d.nodeValue,b.removeChild(d)):c=d:(pD(d),c=l);d=e}},a.qD=function(b){var c=b&&b.nodeName.toLowerCase();
return!(!b||"block"!=(1!=b.nodeType?l:C?Xf(b,"display"):Wf(b,"display"))&&!("td"==c||"table"==c||"li"==c))},a.rD=function(b){return Hc(b,qD,j)},a.sD=function(b,c){if(c){var d,e=nD(oD(c,j)),g=kD(e),h=e.aa.previousSibling;3==e.aa.nodeType&&(e.aa=l);var k=nD(oD(c,m)),n=kD(k),q=k.aa.previousSibling;3==k.aa.nodeType&&(k.aa=l);d=function(){!e.aa&&h&&(e.aa=h.nextSibling,e.aa||(e=new Or(h,Pr(h))));!k.aa&&q&&(k.aa=q.nextSibling,k.aa||(k=new Or(q,Pr(q))));return fo(e.aa||g.aa.firstChild||g.aa,e.offset,k.aa||
n.aa.firstChild||n.aa,k.offset)};var r=rD(c.Cb())}r?(r=wc(r,b),C?pD(r):r.normalize()):b&&(C?pD(b):b.normalize());return d?d():l},a.tD=function(b,c,d){Xs.call(this,c,b||hz.N(),d)};A(tD,Xs);a.uD=function(b){return b.getAttribute&&"true"==b.getAttribute("g_editable")},a.vD=function(b){mD.call(this,b)};A(vD,mD);vD.prototype.Qo=function(b){var c=hD(this,j),d=hD(this,m),c=c&&d?wc(c,d):c||d;vD.n.Qo.call(this);if(b)return sD(c,b);c&&(b=uo(ac(Rb(c))),(b=sD(c,b))&&b.select())};
a.wD=function(b,c,d){for(var e=(c=1==c)?b.U():b.ea(),g=c?b.ra():b.Ia(),h=b.Cb();e!=h&&e!=d&&!(c&&0!=g||!c&&g!=Pr(e));)var k=e.parentNode,e=B.indexOf(k.childNodes,e),g=c?e:e+1,e=k;return lD(c?e:b.U(),c?g:b.ra(),c?b.ea():e,c?b.Ia():g)},a.xD=function(b){ug(b,m);if(Do)for(var c=b,b=b.parentNode;b&&"HTML"!=b.tagName;){if(tg?"none"==b.style[tg].toLowerCase():(C||rb)&&"on"==b.getAttribute("unselectable")){ug(b,m,j);for(var d=0,e=b.childNodes.length;d<e;d++){var g=b.childNodes[d];g!=c&&1==g.nodeType&&ug(b.childNodes[d],
j)}}c=b;b=b.parentNode}},a.yD=function(b){var c=b.target.tagName;"TEXTAREA"!=c&&"INPUT"!=c&&b.preventDefault()},a.zD=void 0,a.AD=function(b){var c=b.Cb();return b.U()!=c.parentElement&&uD(c)||!!Hc(c,uD)},a.BD=function(b,c){var d=wD(b,1,c),d=wD(d,0,c),e=d.U(),g=d.ea(),h=d.ra(),d=d.Ia();if(e==g){for(;g!=c&&0==h&&d==Pr(g);)e=g.parentNode,h=B.indexOf(e.childNodes,g),d=h+1,g=e;e=g}return fo(e,h,g,d)},a.CD=function(b,c){Do&&c.e(b,"mousedown",yD,j);ug(b,j);for(var d=b.getElementsByTagName("INPUT"),e=0,g=
d.length;e<g;e++){var h=d[e];h.type in Wo&&xD(h)}B.forEach(b.getElementsByTagName("TEXTAREA"),xD)},a.DD=function(b){return!!Uo[b.tagName]},a.ED=function(b){return hs(Q.filter(new fs(b),gs))},a.FD=void 0,a.GD=function(b){var c=arguments,d=c.length;return function(){for(var b=0;b<d;b++)if(!c[b].apply(this,arguments))return m;return j}},a.HD=function(b){this.Bf=b;this.DO=j;this.fw=[]},a.ID=function(b){b.Dv||(b.Dv=Gc(b.Bf));return b.Dv};a.JD=function(){Wu.call(this)};A(JD,Wu);JD.prototype.jd=s("BTF");JD.prototype.Lb=le("goog.editor.plugins.BasicTextFormatter");
a.KD={UI:"+link",HU:"+formatBlock",UU:"+indent",vV:"+outdent",ZV:"+strikeThrough",QU:"+insertHorizontalRule",$V:"+subscript",aW:"+superscript",kW:"+underline",jU:"+bold",WU:"+italic",FU:"+fontSize",EU:"+fontName",DU:"+foreColor",dU:"+backColor",tV:"+insertOrderedList",oW:"+insertUnorderedList",XU:"+justifyCenter",YU:"+justifyFull",$U:"+justifyRight",ZU:"+justifyLeft"},a.LD=J.Fm(KD);t=JD.prototype;t.Be=function(b){return b in LD};t.se=function(){return yv(this.B)};a.MD=function(b){return jD(b).Da()};
t.$e=function(b,c){var d,e,g,h,k,n=c;switch(b){case "+backColor":if(n!==l)if(Jo){e=n;g=yv(this.B);var q,r;g&&g.isCollapsed()&&(q=jD(this).createTextNode(D?" ":""),n=g.U(),r=1==n.nodeType?n:n.parentNode,""==r.innerHTML?(r.style.textIndent="-10000px",r.appendChild(q)):(r=jD(this).v("span",{style:"text-indent:-10000px"},q),g.cg(r)),Hn(q).select());ND(this,"hiliteColor",e,m,j);q&&(D&&(q.data=""),r.style.textIndent="")}else rb?ND(this,"hiliteColor",n):ND(this,b,n);break;case "+link":a:{k=n;this.B.kf||
jD(this).Pa().focus();g=(e=this.se())&&e.Cb();if((g=Ic(g,"A"))&&Hc(g,uD))nc(g);else{g=l;var v=[];if((n=e&&e.Cb())&&"IMG"==n.tagName)k=l;else{if(e&&e.isCollapsed())e=e.te(0).Pd(),Ao?(g=jD(this).createElement("A"),e.insertNode(g)):zo&&(e.pasteHTML("<a id='newLink'></a>"),g=jD(this).h("newLink"),g.removeAttribute("id"));else{var x=db();ND(this,"CreateLink",x);B.forEach(this.B.h().getElementsByTagName("A"),function(b){Ga(b.href,x)&&v.push(b)});v.length&&(g=v.pop())}e=g;g=new HD(e);g.Bf.href="/";k&&(e.target=
k);v&&(g.fw=v);k=g}if(k){if(!this.B.execCommand("link",k))if(h=this.B.Mk.prompt($z,"http://"))if(e=k,g=ID(k)||h,n=e.Bf,n.href=h,q=ID(e),g!=q&&(h=ys(n),3==h.nodeType&&(h=h.parentNode),Gc(h)!=q&&(h=n),ic(h),n=Sb(h),h.appendChild(n.createTextNode(g)),e.Dv=l),e.DO=m,e=k.Bf,No){g=e.nextSibling;if(!g||!(3==g.nodeType&&(Fa(g.data," ")||Fa(g.data," "))))g=Sb(e).createTextNode(" "),kc(g,e);wo(g,1).select()}else Xr(e,m);else{e=Hn(k.Bf);e=new vD(e);nc(k.Bf);for(k.Bf=l;k.fw.length;)nc(k.fw.pop());e.restore().select();
k=l;break a}break a}}k=l}break;case "+justifyCenter":case "+justifyFull":case "+justifyRight":case "+justifyLeft":ND(this,b,l,m,j);D&&ND(this,b,l,m,j);(!Ho||!D)&&Q.forEach(yv(this.B),OD);break;default:C&&("+formatBlock"==b&&n)&&(n="<"+n+">");if("+foreColor"==b&&n===l)break;switch(b){case "+indent":case "+outdent":Ho&&(D&&(e=j),rb&&(e="+outdent"==b?!MD(this).queryCommandEnabled("outdent"):j));case "+insertOrderedList":case "+insertUnorderedList":if(q=Qo)q=MD(this),q=PD(this,j,q,b,i);if(q)g="P"!=this.B.queryCommandValue("+defaultTag");
else if(!Ro&&(C||rb)){d=this.se();q=d.Cb();var F=MD(this);QD.lastIndex=0;QD.test(q.innerHTML)&&(d=d.U()&&d.ea()?new mD(d):l,"P"==q.tagName?RD(q,j):(q.innerHTML=q.innerHTML.replace(QD,'<p$1 trtempbr="temp_br">'),q=B.toArray(q.getElementsByTagName("P")),Q.forEach(q,function(b){if("temp_br"==b.getAttribute("trtempbr")){b.removeAttribute("trtempbr");if(es(Fc(b))){var c=C?F.createTextNode(" "):F.createElement("BR");b.appendChild(c)}RD(b)}})),d.restore())}D&&(Po&&!this.queryCommandValue(b))&&(q=this.B.queryCommandValue("+defaultTag"),
"P"==q||"DIV"==q?q=m:(q=this.se(),q.isCollapsed()&&3!=q.rc().nodeType?(d=jD(this).createTextNode(" "),q.insertNode(d,m),Hn(d).select(),q=j):q=m),h|=q);case "+formatBlock":d=!!this.B.Uh("Bidi");break;case "+subscript":case "+superscript":Oo&&!this.queryCommandValue(b)&&(q="+subscript"==b?"+superscript":"+subscript",r=SD(q),this.queryCommandValue(q)||MD(this).execCommand(r,m,l),MD(this).execCommand(r,m,l));break;case "+underline":case "+bold":case "+italic":e=D&&Ho&&this.queryCommandValue(b);break;
case "+foreColor":case "+fontName":e=Ho&&D}ND(this,b,n,d,!!e);h&&MD(this).execCommand("Delete",m,j);g&&MD(this).execCommand("FormatBlock",m,"<div>")}D&&!this.B.Kg&&jD(this).Pa().focus();return k};
t.queryCommandValue=function(b){var c;switch(b){case "+link":return b=(b=this.se())&&b.Cb(),b=Ic(b,"A"),!!b&&!!Hc(b,uD);case "+justifyCenter":case "+justifyFull":case "+justifyRight":case "+justifyLeft":return TD(this,b);case "+formatBlock":var b=yv(this.B),d=l;Q.forEach(b,function(b,c,e){-1!=e.$b&&(b=rD(b).tagName,d=d||b,d!=b&&(d=l,f(Q.$a)),e.mp())});return d;case "+indent":case "+outdent":case "+insertHorizontalRule":return m;case "+fontSize":case "+fontName":case "+foreColor":case "+backColor":return this.ft(MD(this),
b,Ho&&D);case "+underline":case "+bold":case "+italic":c=Ho&&D;default:var e=MD(this);return PD(this,j,e,b,c)}};t.LG=function(b){Fo&&b.match(/^\s*<script/i)&&(b="&nbsp;"+b);Go&&(b=b.replace(/<(\/?)strong([^\w])/gi,"<$1b$2"),b=b.replace(/<(\/?)em([^\w])/gi,"<$1i$2"));return b};
t.FK=function(b){for(var b=b.getElementsByTagName("IMG"),c=0,d;d=b[c];c++)if(C){d.removeAttribute("tabIndex");d.removeAttribute("tabIndexSet");var e=d;"removeAttribute"in e&&e.removeAttribute(ra);try{delete e[ra]}catch(g){}d.zP&&(d.tabIndex=d.zP)}};t.GK=function(b){if(E){for(var c=Tb(this.B.gb.Ha,"HEAD",i,i),d=[],e=c.length,g=1;g<e;++g)for(var h=c[g].getElementsByTagName("STYLE"),k=h.length,n=0;n<k;++n)d.push(h[n].outerHTML);return d.join("")+b}return b};
t.Hr=function(b,c,d){if(!d)return m;var e;switch(c){case "b":e="+bold";break;case "i":e="+italic";break;case "u":e="+underline";break;case "s":return j}return e?(this.B.execCommand(e),j):m};
a.QD=C?/<br([^\/>]*)\/?>/gi:/<br([^\/>]*)\/?>(?!<\/(div|p)>)/gi,a.RD=function(b,c){if(C||rb){var d=b.outerHTML.replace(/<(\/?)p/gi,"<$1div");c&&(d=d.replace(QD,"</div><div$1>"));rb&&!/<\/div>$/i.test(d)&&(d+="</div>");b.outerHTML=d}},a.SD=function(b){return 0==b.indexOf("+")?b.substring(1):b},a.OD=function(b){b=rD(b);b.align&&(b.style.textAlign=b.align,b.removeAttribute("align"))},a.ND=function(b,c,d,e,g){var h=l;e&&(h=b.B.queryCommandValue("rtl")?"rtl":b.B.queryCommandValue("ltr")?"ltr":l);var c=
SD(c),k,n;if(C){var q=c;n=[];var e=l,r=b.se();k=jD(b);if(q in UD){var v=r&&r.Cb();if(v){for(var x=Ub("BLOCKQUOTE",l,v),F,I=0;I<x.length;I++)if(r.containsNode(x[I])){F=x[I];break}if(v=F||Ic(v,"BLOCKQUOTE"))e=k.v("div",{style:"height:0"}),v.appendChild(e),n.push(e),F?r=fo(F,0,e,0):r.containsNode(e)&&(r=lD(r.U(),r.ra(),e,0)),r.select()}}F=b.B;!F.nc()&&!e&&q in VD&&(F=F.h(),r&&(r.isCollapsed()&&!qc(F))&&(e=r.te(0).Pd(),r=e.duplicate(),r.moveToElementText(F),r.collapse(m),r.isEqual(e)&&(r=k.createTextNode(" "),
F.appendChild(r),e.move("character",1),e.move("character",-1),e.select(),n.push(r))),e=k.v("div",{style:"height:0"}),F.appendChild(e),n.push(e));k=n[0];n=n[1]}if(E){k=c;var R;WD[k]&&(R=jD(b).v("div",{style:"height: 0"},"x"),b.B.h().appendChild(R));XD[k]&&(k=b.B.h(),R=jD(b).v("div",{style:"height: 0"},"x"),k.insertBefore(R,k.firstChild));k=R}if(D&&(R=c,G("1.9")&&"formatblock"==R.toLowerCase()&&(R=b.se(),F=R.U(),R.isCollapsed()&&(F&&"BODY"==F.tagName)&&(e=R.ra(),(F=F.childNodes[e])&&"BR"==F.tagName))))R=
R.Pd(),R.setStart(F,0),R.setEnd(F,0);if(So&&"fontsize"==c.toLowerCase()){var aa=BD(yv(b.B),b.B.h());Q.forEach(Q.filter(aa,function(b,c,d){return 1==d.$b&&aa.containsNode(b)}),function(b){Uf(b,"font-size","");D&&(0==b.style.length&&b.getAttribute("style")!=l)&&b.removeAttribute("style")})}R=MD(b);if(g&&Ho&&(R.execCommand("styleWithCSS",m,j),rb)){F=[];e=yv(b.B).Cb();do F.push(e);while(e=e.parentNode);F=Q.uK(Q.cd(yv(b.B)),Q.cd(F));F=Q.filter(F,qD);Q.forEach(F,function(b){var c=b.style.outline;b.style.outline=
"0px solid red";b.style.outline=c})}R.execCommand(c,m,d);g&&Ho&&R.execCommand("styleWithCSS",m,m);E&&(!G("526")&&"formatblock"==c.toLowerCase()&&d&&/^[<]?h\d[>]?$/i.test(d))&&Q.forEach(b.se(),function(b){"Apple-style-span"==b.className&&(b.style.fontSize="",b.style.fontWeight="")});if(/insert(un)?orderedlist/i.test(c)){if(E){var ta=m;Q.forEach(b.se(),function(b){var c=b.tagName;if("UL"==c||"OL"==c)if(ta){if(c=rc(b)){var d=b.ownerDocument.createRange();d.setStartAfter(c);d.setEndBefore(b);if(Ia(d.toString())&&
c.nodeName==b.nodeName){for(;c.lastChild;)b.insertBefore(c.lastChild,b.firstChild);c.parentNode.removeChild(c)}}}else ta=j})}if(C){for(c=(c=b.se())&&c.rc();c&&"UL"!=c.tagName&&"OL"!=c.tagName;)c=c.parentNode;c&&(c=c.parentNode);c&&(d=B.toArray(c.getElementsByTagName("UL")),B.extend(d,B.toArray(c.getElementsByTagName("OL"))),B.forEach(d,function(b){var c=b.type;if(c&&!("UL"==b.tagName?YD:ZD)[c])b.type=""}));n&&N(n)}}k&&N(k);h&&b.B.execCommand(h)},a.VD={indent:1,outdent:1,insertOrderedList:1,insertUnorderedList:1,
justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,ltr:1,rtl:1},a.UD={insertOrderedList:1,insertUnorderedList:1},a.ZD={1:1,a:1,A:1,i:1,I:1},a.YD={disc:1,circle:1,square:1},a.WD={justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,formatBlock:1},a.XD={insertOrderedList:1,insertUnorderedList:1},a.$D={center:1,justify:1,right:1,left:1},a.TD=function(b,c){var d=c.replace("+justify","").toLowerCase();"full"==d&&(d="justify");var e=b.B.Uh("Bidi");if(e)return d==e.pX();var g=b.se();if(!g)return m;
for(var h=g.Cb(),e=B.filter(h.childNodes,function(b){return gs(b)&&g.containsNode(b,j)}),e=e.length?e:[h],h=0;h<e.length;h++){var k=rD(e[h]),n=d,q=Yf(k,"textAlign"),q=q.replace(/^-(moz|webkit)-/,"");$D[q]||(q=k.align||"left");if(n!=q)return m}return j};JD.prototype.ft=function(b,c,d){return PD(this,m,b,c,d)};a.PD=function(b,c,d,e,g){e=SD(e);if(g){var h=MD(b);h.execCommand("styleWithCSS",m,j)}b=c?d.queryCommandState(e):d.queryCommandValue(e);g&&h.execCommand("styleWithCSS",m,m);return b};a.aE=function(b,c){O.call(this);this.Os=[];for(this.Ks=[];b&&"BODY"!=b.nodeName&&b!=c;){for(var d=0,e=b.previousSibling;e;)e=e.previousSibling,++d;this.Os.unshift(d);this.Ks.unshift(b.nodeName);b=b.parentNode}};A(aE,O);aE.prototype.toString=function(){for(var b=[],c,d=0;c=this.Ks[d];d++)b.push(this.Os[d]+","+c);return b.join("\n")};a.bE=function(b,c){for(var d,e=c,g=0;d=b.Ks[g];++g)if(e=e.childNodes[b.Os[g]],!e||e.nodeName!=d)return l;return e};aE.prototype.w=function(){delete this.Os;delete this.Ks};le("goog.editor.plugins.Blockquote");a.cE=function(){Wu.call(this)};A(cE,Wu);t=cE.prototype;t.hg="DIV";t.jd=s("EnterHandler");t.enable=function(b){cE.n.enable.call(this,b);To&&("P"==this.hg||"DIV"==this.hg)&&jD(this).Da().execCommand("opera-defaultBlock",m,this.hg)};t.LG=function(b){return!b||es(b)?Fo?this.kM():"":b};t.kM=mf("<br>");
t.XM=function(b){if(D&&this.B.Kg)return m;if(8==b.keyCode){var c=yv(this.B),d=this.B.h(),c=c&&c.U();d.firstChild==c&&Qs(c)&&(b.preventDefault(),b.stopPropagation())}else if(13==b.keyCode)if(D){if(!b.shiftKey){var d=yv(this.B),c=!d||d.isCollapsed(),e=Ao?dE(this):eE(this),g=this.B.execCommand("+splitBlockquote",e);g&&(b.preventDefault(),b.stopPropagation());Ao||e.removeNode(j);g||this.PM(b,c,d)}}else{this.B.Kh();d=Ao?dE(this):eE(this);if(c=!!this.B.execCommand("+splitBlockquote",d))b.preventDefault(),
b.stopPropagation();Ao||d.removeNode(j);E&&this.QM(b);if(C||rb)fE(this);else if(!c&&E){if(c=d=yv(this.B))a:{for(c=d.Cb();c;c=c.parentNode)if(DD(c)){c="BLOCKQUOTE"==c.tagName;break a}c=m}if(c){c=jD(this);e=c.createElement("BR");d.insertNode(e,j);if(d=DD(e.parentNode)){for(d=e.nextSibling;d&&3==d.nodeType&&!d.nodeValue;)d=d.nextSibling;d=!d}d&&jc(c.createElement("BR"),e);Xr(e,m);b.preventDefault()}}this.B.Xe()}else if(D&&46==b.keyCode&&(c=yv(this.B),c.isCollapsed()&&(d=c.ea(),1==d.nodeType&&(c=d.childNodes[c.Ia()])&&
"BR"==c.tagName)))e=hs(Q.filter(new fs(c,m,j),gs)),g=c.nextSibling,d.removeChild(c),b.preventDefault(),g&&DD(g)&&(e&&!("BR"==e.tagName||DD(e))?wo(e,Pr(e)).select():(b=ys(g),wo(b,0).select()));return m};t.Gr=function(b){if(D&&this.B.Kg)return m;(C||rb)&&13==b.keyCode&&fE(this,j);return m};t.QM=w;t.PM=w;
a.gE=J.Ih("LI","DIV","H1","H2","H3","H4","H5","H6"),a.fE=function(b,c){for(var d=yv(b.B),e=d.rc(),g=b.B.h(),h;e&&e!=g;){var k=e.nodeName;if("DIV"==k||gE[k]&&(!c||!(Qs(e)&&1==e.getElementsByTagName("BR").length))){if(rb&&h){"DIV"==k&&(h==e.lastChild&&Qs(h))&&(kc(h,e),Hn(h).select());break}return}rb&&(c&&"P"==k&&"DIV"!=k)&&(h=e);e=e.parentNode}if(C&&!G(9)){var n=m,d=d.Pd(),e=d.duplicate();e.moveEnd("character",1);if(e.text.length&&(n=e.parentElement(),e=e.duplicate(),e.collapse(m),e=e.parentElement(),
n=n!=e&&e!=d.parentElement()))d.move("character",-1),d.select()}b.B.gb.Da().execCommand("FormatBlock",m,"<DIV>");n&&(d.move("character",1),d.select())},a.eE=function(b){var b=jD(b).Da(),c=b.selection.createRange(),d=db();c.pasteHTML('<span id="'+d+'"></span>');b=b.getElementById(d);b.id="";return b},a.dE=function(b){b=yv(b.B);if(!b.isCollapsed()){var c=j;if(rb){var d=b.U(),e=b.ra();d==b.ea()&&(d.lastChild&&"BR"==d.lastChild.tagName&&e==d.childNodes.length-1)&&(c=m)}if(c){var g=b;if(g&&!g.isCollapsed()){var h=
j,c=g.Cb(),d=new aE(g.U(),c),e=g.ra(),k;k=g;var n=k.U();qD(n)&&(n=n.childNodes[k.ra()]||n);var n=rD(n),q=k.ea();qD(q)&&(q=q.childNodes[k.Ia()]||q);q=rD(q);k=n==q;if(n=!k)a:{var q=g,n=q.ea(),q=q.Ia(),r=n;if(qD(r)){var v=r.childNodes[q];if(!v||1==v.nodeType&&qD(v)){n=m;break a}}for(v=rD(r);v!=r;){if(ED(r)){n=j;break a}r=r.parentNode}n=q!=Pr(n)}g.Yc();(g=bE(d,c))?g=wo(g,e):(g=wo(c,c.childNodes.length),h=m);g.select();k&&(k=rD(g.U()),Qs(k,j)&&(h="&nbsp;",rb&&"LI"==k.tagName&&(h="<br>"),k.innerHTML=h,
Ps(k.firstChild),h=m));n&&(g=rD(g.U()),k=ED(g),g&&k&&(hc(g,k.childNodes),N(k)));h&&(g=wo(bE(d,c),e),g.select())}}}return oD(b,j)};a.hE=function(){},a.iE=new hE,a.jE=["click",D?"keypress":"keydown"];hE.prototype.e=function(b,c,d,e,g){function h(b){if("click"==b.type&&nd(b))c.call(e,b);else if(13==b.keyCode||3==b.keyCode)b.type="keypress",c.call(e,b)}h.Hj=c;h.vt=e;g?g.e(b,jE,h):P(b,jE,h)};hE.prototype.Fa=function(b,c,d,e,g){for(var h=0;d=jE[h];h++){var k;k=yd(b,d,m)||[];for(var n,q=0;n=k[q];q++)if(n.Wf.Hj==c&&n.Wf.vt==e){g?g.Fa(b,d,n.Wf):xd(b,d,n.Wf);break}}};a.lE=function(b){O.call(this);this.Ak=b||window;this.As=P(this.Ak,"resize",this.cx,m,this);this.kc=Yb(this.Ak);if(E&&lb||rb&&this.Ak.self!=this.Ak.top)this.hu=window.setInterval(y(this.WB,this),kE)};A(lE,Gd);a.kE=500;t=lE.prototype;t.As=l;t.Ak=l;t.kc=l;t.hu=l;t.Cl=function(){return this.kc?this.kc.clone():l};t.w=function(){lE.n.w.call(this);this.As&&(zd(this.As),this.As=l);this.hu&&(window.clearInterval(this.hu),this.hu=l);this.kc=this.Ak=l};t.cx=function(){this.WB()};
t.WB=function(){var b=Yb(this.Ak);Pb(b,this.kc)||(this.kc=b,this.dispatchEvent("resize"))};a.nE=function(b,c){O.call(this);this.$=Sb(b);this.M=new me(this);this.DA=new lE(this.$.Pa());this.md={};this.sd=this.$.v("DIV",{className:mE});S(this.sd,m);b.appendChild(this.sd);Uf(this.sd,"zIndex",c);this.an=this.sd;this.LK=this.$.v("DIV",{className:"tr_bubble_closebox",innerHTML:"&nbsp;"});this.an.appendChild(this.LK);CD(this.sd,this.M);this.ii=new Sh(this.sd)};A(nE,Gd);a.mE="tr_bubble";t=nE.prototype;t.Lb=le("goog.ui.editor.Bubble");
t.w=function(){nE.n.w.call(this);N(this.sd);this.sd=l;this.M.F();this.M=l;this.DA.F();this.DA=l};t.R=p("an");t.Cb=p("sd");t.FN=function(){this.P()&&this.X()};t.mN=function(){for(var b in this.md)N(this.md[b].element);this.md={};H.remove(this.sd,"tr_multi_bubble");this.M.removeAll();this.dispatchEvent("hide")};t.P=function(){return this.ii.P()};a.oE=C?4:2,a.pE=new Pf(oE,0,oE,0);
nE.prototype.X=function(){var b=l,c=j,d;for(d in this.md)var e=this.md[d],b=e.gA,c=c&&e.kR;d=496;b=fg(this.sd)!=fg(b);c&&(d=qE(this,b?7:5,4,9));d&496&&(d=qE(this,b?6:4,5,9));d&496&&(d=qE(this,b?7:5,4,5),d&496&&this.Lb.xk("reposition(): positionAtAnchor() failed with "+d))};
a.qE=function(b,c,d,e){var g=l,h;for(h in b.md){var k=b.md[h].gA;if(!g||sc(k,g))g=b.md[h].gA}return hm(g,c,b.sd,d,l,pE,e)},a.rE=function(b,c,d,e,g,h){this.type=d;this.gA=g;this.kR=h;this.element=b.v("DIV",{className:"tr_bubble_panel",id:c},b.v("DIV",{className:"tr_bubble_panel_title"},e+":"),b.v("DIV",{className:"tr_bubble_panel_content"}))};rE.prototype.R=function(){return this.element.lastChild};a.sE=function(){Wu.call(this);this.gc=new me(this)};A(sE,Wu);a.tE=function(b,c){return new nE(b,c)},a.uE={};t=sE.prototype;t.Uj=l;t.Px=m;t.jd=mf("AbstractBubblePlugin");t.Gr=function(){this.P()&&this.oj();return m};
t.oj=function(b,c){var d;if(b)d=b.target;else if(c)d=c;else{var e=yv(this.B);if(e){var g=e.U(),h=e.ea(),k=e.ra(),n=e.Ia();C&&(e.isCollapsed()&&g!=h)&&(e=wo(g,k));1==g.nodeType&&(g==h&&k==n-1)&&(g=g.childNodes[k],1==g.nodeType&&(d=g))}d=d||e&&e.Cb()}var q;a:{if(d&&(k=this.hM(d))){if(k!=this.Rt||!this.Uj){vE(this);this.dh&&as(this.dh);d=wE(this);var r=this.xw();if(!J.some(d.md,function(b){return b.type==r})){this.Rt=k;var g=this.xw(),n=this.AD(),h=y(this.bL,this),v=this.wS(),e=db(),k=new rE(d.$,e,g,
n,k,!v);d.md[e]=k;n=0;for(v=d.an.childNodes.length-1;n<v;n++){var x=d.an.childNodes[n];if(d.md[x.id].type>g){q=x;break}}jc(k.element,q||d.an.lastChild);h(k.R());CD(k.element,d.M);q=J.Oa(d.md);1==q?(d.M.e(d.DA,"resize",d.FN).e(d.ii,"hide",d.mN),d.ii.C(j),d.X()):2==q&&H.add(d.sd,"tr_multi_bubble");d.X();this.Uj=e;this.gc.e(d,"hide",this.aE);this.gi();this.Px&&this.gc.e(d.R(),"keydown",this.IP);this.gc.e(d.R(),"mouseover",function(){this.dh&&this.dh.stop()},this)}}else this.dh&&this.dh.stop();q=m;break a}vE(this);
q=m}return q};t.disable=function(b){if(b.Jj==iv){var c=uE[b.id];c&&(c.F(),delete uE[b.id])}};a.wE=function(b){var c=b.EW||b.B.Mk.document.body;b.$=Sb(c);var d=uE[b.B.id];d||(d=tE.call(l,c,b.B.kK||0),uE[b.B.id]=d);return d};t.xw=s("");t.AD=s("");t.wS=nf;a.vE=function(b){if(b.Uj&&(!b.dh||!b.dh.Fb()))b.dh=new Pj(function(){if(this.Uj){var b=wE(this),d=this.Uj;N(b.md[d].element);delete b.md[d];d=J.Oa(b.md);1>=d&&H.remove(b.sd,"tr_multi_bubble");0==d?b.ii.C(m):b.X();this.aE()}},250,b),b.dh.start()};
t.gi=w;t.aE=function(){this.Uj=this.Rt=l;this.gc.removeAll()};t.$w=function(b){if(this.Px&&this.P()&&9==b.keyCode&&!b.shiftKey){var c=wE(this).R();if(c=L("tr_bubble_link",c))return c.focus(),b.preventDefault(),j}return m};t.IP=function(b){if(this.P()&&9==b.keyCode){var c=wE(this).R(),c=Vb("tr_bubble_link",c);if(b.shiftKey?c[0]==b.target:c.length&&c[c.length-1]==b.target)this.B.focus(),b.preventDefault()}};t.P=function(){return!!this.Uj};t.X=function(){var b=wE(this);b&&b.X()};
t.Pq=function(b,c,d,e,g){c=this.$.v("SPAN",{className:"tr_bubble_link"},g?this.$.v("I",{className:g},c):c);this.Px&&c.setAttribute("tabindex",0);c.setAttribute("role","link");e?e.appendChild(c):(e=this.$.h(b))&&mc(c,e);c.id=b;CD(c,this.gc);d&&(b=this.gc,iE.e(c,d,i,b.ca||b,b));return c};z("Go to link: ");z("Change");z("Remove");a.xE=function(b){O.call(this);this.gd=b};A(xE,Gd);xE.prototype.show=function(){this.We||(this.We=this.wv(),this.We.addEventListener(gi,this.rM,m,this));this.We.C(j)};xE.prototype.hide=function(){this.We&&this.We.C(m)};xE.prototype.rb=function(){return!!this.We&&this.We.P()};a.yE=function(b){this.jl=b;this.Ai=new Xh("",j,this.jl.gd);this.dn=new ei(this.jl.gd);this.cn={};this.yh("tr-dialog")};yE.prototype.Ta=function(b){this.Ai.Ta(b);return this};
a.zE=function(b,c){var d=z("OK");b.dn.set("ok",c||d,j);b.cn.ok=y(b.jl.jN,b.jl)},a.AE=function(b){var c=li,d=z("取消");b.dn.set(c,d,m,j);b.cn[c]=y(b.jl.Pw,b.jl);return b};yE.prototype.he=function(b,c,d){d=d||db();this.dn.set(d,b);this.cn[d]=c;return this};yE.prototype.yh=function(b){H.add($h(this.Ai),b);return this};yE.prototype.Aa=function(b){this.Ai.R().appendChild(b);return this};
a.CE=function(b){b.dn.Gb()&&(zE(b),AE(b));ii(b.Ai,b.dn);var c=b.cn;b.cn=l;b.Ai.addEventListener(ji,function(b){if(c[b.key])return c[b.key](b)});ci(b.Ai,j);var d=b.Ai;b.Ai=l;return d};t=xE.prototype;t.yw=function(b){return this.We.oc.Cc(b)};t.jN=function(b){return(b=this.pn(b))?this.dispatchEvent(b):m};t.Pw=function(){return this.dispatchEvent("cancel")};t.w=function(){this.We&&(this.hide(),this.We.F(),this.We=l);xE.n.w.call(this)};t.rM=function(){this.dispatchEvent("afterhide")};a.DE=function(b){Wu.call(this);this.TK=b};A(DE,Wu);t=DE.prototype;t.Be=function(b){return b==this.TK};t.execCommand=function(b,c){return this.$e.apply(this,arguments)};t.Aw=p("qb");t.$e=function(b,c){this.iH||EE(this);this.qb||(this.qb=this.vv(Sb(this.B.Mk),c));var d=yv(this.B);this.pz=d&&new vD(d);Ss(this.B.gb.Pa());wd(this.qb,"afterhide",this.Ln,m,this);this.B.Kg=j;this.qb.show();this.dispatchEvent("dialogOpened");$u(this.B);return j};
t.Ln=function(){this.B.Kg=m;FE(this);this.iH||EE(this);this.dispatchEvent("dialogClosed");$u(this.B);this.B.Vq.selectionchange=Aa()};a.FE=function(b){b.pz&&(b.pz.restore(),b.pz=l);b.B.focus()};t.w=function(){EE(this);DE.n.w.call(this)};t.iH=m;t.Ex=m;a.EE=function(b){b.qb&&!b.Ex&&(b.Ex=j,b.qb.F(),b.qb=l,b.Ex=m)};a.GE=function(){};A(GE,cj);ia(GE);t=GE.prototype;t.L=s("goog-tab");t.qc=function(){return Vc.eB};t.v=function(b){var c=GE.n.v.call(this,b);(b=b.Rf())&&this.Oc(c,b);return c};t.o=function(b,c){var c=GE.n.o.call(this,b,c),d=this.Rf(c);d&&b.Dt(d);if(b.V&8&&(d=b.getParent())&&pa(d.wm))b.Zb(8,m),d.wm(b);return c};t.Rf=function(b){return b.title||""};t.Oc=function(b,c){b&&(b.title=c||"")};a.HE=function(b,c,d){rj.call(this,b,c||GE.N(),d);uj(this,8,j);this.lk|=9};A(HE,rj);HE.prototype.Rf=p("Bp");HE.prototype.Oc=function(b){this.K.Oc(this.h(),b);this.Dt(b)};HE.prototype.Dt=da("Bp");pj("goog-tab",function(){return new HE(l)});a.IE=function(){};A(IE,Vm);ia(IE);IE.prototype.L=s("goog-tab-bar");IE.prototype.qc=function(){return Vc.jJ};IE.prototype.Dz=function(b,c,d){this.vF||(this.Eq||JE(this),this.vF=J.Fm(this.Eq));var e=this.vF[c];e?(b.ep(e==KE||e==LE?Ym:Xm),b.wF=e):IE.n.Dz.call(this,b,c,d)};IE.prototype.df=function(b){var c=IE.n.df.call(this,b);this.Eq||JE(this);c.push(this.Eq[b.wF]);return c};a.JE=function(b){var c=b.L();b.Eq=J.create(ME,c+"-top",NE,c+"-bottom",KE,c+"-start",LE,c+"-end")};a.PE=function(b,c,d){b=b||ME;this.ep(b==KE||b==LE?Ym:Xm);this.wF=b;Xs.call(this,this.xb,c||IE.N(),d);OE(this)};A(PE,Xs);a.ME="top",a.NE="bottom",a.KE="start",a.LE="end";t=PE.prototype;t.dK=j;t.of=l;t.z=function(){PE.n.z.call(this);OE(this)};t.w=function(){PE.n.w.call(this);this.of=l};t.removeChild=function(b,c){QE(this,b);return PE.n.removeChild.call(this,b,c)};t.yz=function(b){PE.n.yz.call(this,b);this.dK&&this.wm(Rh(this,b))};t.wm=function(b){b?b.vm(j):this.of&&this.of.vm(m)};
a.QE=function(b,c){if(c&&c==b.of){for(var d=cs(b,c),e=d-1;c=Rh(b,e);e--)if(c.P()&&c.isEnabled()){b.wm(c);return}for(d+=1;c=Rh(b,d);d++)if(c.P()&&c.isEnabled()){b.wm(c);return}b.wm(l)}};t.wN=function(b){this.of&&this.of!=b.target&&this.of.vm(m);this.of=b.target};t.xN=function(b){b.target==this.of&&(this.of=l)};t.uN=function(b){QE(this,b.target)};t.vN=function(b){QE(this,b.target)};t.ue=function(){$s(this)||this.pd(this.of||Rh(this,0))};
a.OE=function(b){b.m().e(b,"select",b.wN).e(b,"unselect",b.xN).e(b,"disable",b.uN).e(b,"hide",b.vN)};pj("goog-tab-bar",function(){return new PE});a.RE=function(){Wu.call(this)};A(RE,Wu);RE.prototype.Hr=function(b){if(D&&this.B.Kg)b=m;else if(9==b.keyCode&&!b.metaKey&&!b.ctrlKey){var c=yv(this.B);Ic(c.Cb(),"LI")||Q.some(c,function(b){return"LI"==b.tagName})?(this.B.execCommand(b.shiftKey?"+outdent":"+indent"),b.preventDefault(),b=j):b=m}else b=m;return b};a.SE=function(){Wu.call(this)};A(SE,RE);SE.prototype.jd=s("ListTabHandler");a.TE=function(b){Wu.call(this);this.lP=b};A(TE,Wu);t=TE.prototype;t.jd=mf("LoremIpsum");t.aq=of;t.Jp=m;t.queryCommandValue=function(b){return"usinglorem"==b&&this.Jp};
t.execCommand=function(b,c){if("clearlorem"==b){var d=!!c,e=this.B;if(this.Jp&&!e.Kg){var g=e.h();g||(g=e.Jc);this.Jp=m;g.style.fontStyle=this.yP;e.Cd(j,l,j);d&&e.Td()&&(E?(Rb(e.h()).body.focus(),e.Qf()):rb&&Dv(e))}}else"updatelorem"==b&&(d=this.B,!this.Jp&&(!d.Kg&&kv!=d.id)&&((e=d.h())||(e=d.Jc),Qs(e)&&(this.Jp=j,this.yP=e.style.fontStyle,e.style.fontStyle="italic",d.Cd(j,this.lP,j))))};t.Be=function(b){return"clearlorem"==b||"updatelorem"==b||"usinglorem"==b};a.UE=function(b){this.BB=b};A(UE,Gd);a.VE=function(){O.call(this);this.hP=100;this.Ed=[];this.bk=[];this.Ys=[]};A(VE,Gd);t=VE.prototype;t.Xr=l;t.sA=function(){WE(this,this.Ed,this.bk)};t.dz=function(){WE(this,this.bk,this.Ed)};a.WE=function(b,c,d){if(c.length){var e=c.pop();d.push(e);b.Ys.push({type:c==b.Ed?"before_undo":"before_redo",xD:c==b.Ed?e.sA:e.dz,state:e});1==b.Ys.length&&b.Dg();(0==c.length||1==d.length)&&b.dispatchEvent("state_change")}};
t.Dg=function(){if(!(this.Xr||0==this.Ys.length)){var b=this.Ys.shift();this.dispatchEvent({type:b.type,state:b.state})&&(b.state.BB?(this.Xr=P(b.state,"action_completed",this.RL,m,this),b.xD.call(b.state)):(b.xD.call(b.state),this.Dg()))}};t.RL=function(){zd(this.Xr);this.Xr=l;this.Dg()};a.XE=function(b){Wu.call(this);b=b||new VE;this.yF&&zd(this.yF);this.$d=b;this.yF=P(this.$d,"state_change",this.xL,m,this);this.cj={};this.sn={};this.HE=l;this.nK=y(this.VR,this)};A(XE,Wu);XE.prototype.Lb=le("goog.editor.plugins.UndoRedo");XE.prototype.Tn=l;a.YE=J.Fm({mW:"+undo",FV:"+redo"});t=XE.prototype;t.Be=function(b){return b in YE};t.iI=function(b){this.disable(b);this.B=l};
t.enable=function(b){if(!this.isEnabled(b)){zv(b);var c=new me(this);D||c.e(b,"beforechange",this.tM);c.e(b,ev,this.BM);c.e(b,"blur",this.Ow);this.cj[b.Jg]=c;ZE(this,b)}};t.disable=function(b){zv(b);var c=this.cj[b.Jg];c&&(c.F(),delete this.cj[b.Jg]);this.sn[b.Jg]&&delete this.sn[b.Jg]};t.isEnabled=function(b){return!!this.cj[b.Jg]};t.w=function(){XE.n.w.call(this);for(var b in this.cj)this.cj[b].F(),delete this.cj[b];this.B=l;this.$d&&(this.$d.F(),delete this.$d)};t.jd=s("UndoRedo");
t.execCommand=function(b){"+undo"==b?this.$d.sA():"+redo"==b&&this.$d.dz()};t.queryCommandValue=function(b){var c=l;"+undo"==b?c=0<this.$d.Ed.length:"+redo"==b&&(c=0<this.$d.bk.length);return c};t.xL=function(){this.B.dispatchEvent({type:"cvc",UK:["+redo","+undo"]})};
t.VR=function(b,c,d){var e=this.B;if(e){Zu(e,j,j);try{e.Kh();e.execCommand("clearlorem",j);e.h().innerHTML=c;d&&d.select();var g=this.B;e.focus();g&&g.Jg!=b.Cn&&g.execCommand("updatelorem");var h=this.sn[b.Cn];h.vi=c;h.gI=d}catch(k){this.Lb.log(ce,"Error while restoring undo state",k)}finally{this.Tn=b,e.Xe(),$u(e)}}};
t.Hr=function(b,c,d){if(d){var e;"z"==c?e=b.shiftKey?"+redo":"+undo":"y"==c&&(e="+redo");if(e)return(b="+undo"==e?this.$d.Ed[this.$d.Ed.length-1]:this.$d.bk[this.$d.bk.length-1])&&b.Cn?this.B.execCommand(e):this.execCommand(e),j}return m};t.tM=function(b){if(!this.Tn){var b=b.target,c=b.Jg;this.HE!=c&&(this.HE=c,ZE(this,b))}};t.BM=function(b){this.Tn?(b=this.Tn,this.Tn=l,b.dispatchEvent("action_completed")):ZE(this,b.target)};t.Ow=function(b){(b=b.target)&&zv(b)};
a.ZE=function(b,c){var d=c.Jg,e,g;c.queryCommandValue("usinglorem")?(e="",g=l):(e=c.h().innerHTML,g=new $E(c),g=!g.isValid()?l:g);var h=b.sn[d];if(h){if(h.vi==e)return;if(""==e||""==h.vi){var k=c.ht(8,"",{});if(e==k&&""==h.vi||h.vi==k&&""==e)return}h.ez=e;h.wR=g;k=b.$d;if(0==k.Ed.length||!h.equals(k.Ed[k.Ed.length-1])){k.Ed.push(h);k.Ed.length>k.hP&&k.Ed.shift();var n=k.bk.length;k.bk.length=0;k.dispatchEvent({type:"state_added",state:h});(1==k.Ed.length||n)&&k.dispatchEvent("state_change")}}b.sn[d]=
new aF(d,e,g,b.nK)},a.aF=function(b,c,d,e){this.BB=j;this.Cn=b;this.fH=e;this.vi=c;this.gI=d};A(aF,UE);aF.prototype.sA=function(){this.fH(this,this.vi,this.gI)};aF.prototype.dz=function(){this.fH(this,this.ez,this.wR)};aF.prototype.equals=function(b){return this.Cn==b.Cn&&this.vi==b.vi&&this.ez==b.ez};
a.$E=function(b){this.Md=b;var c=b.gb.Pa(),b=(b=yv(b))&&b.Tf()&&b.Pa()==c?b:l;if(Ao){if(c=b,this.os=m,c){var d=En(c),e=Fn(c);if(d&&e){var b=c.$h()?c.Ia():c.ra(),d=new aE(d,this.Md.h()),g=Gn(c),e=new aE(e,this.Md.h());c.$h()?(this.Ca=e,this.Wz=g,this.xa=d,this.Yv=b):(this.Ca=d,this.Wz=b,this.xa=e,this.Yv=g);this.os=j}}}else zo&&(c=b,this.os=m,c&&(b=c.te(0).Pd(),sc(this.Md.h(),b.parentElement())&&(c=this.Md.gb.Da().body.createTextRange(),c.moveToElementText(this.Md.h()),e=b.duplicate(),e.collapse(j),
e.setEndPoint("StartToStart",c),this.Ca=bF(e),b=b.duplicate(),b.setEndPoint("StartToStart",c),this.xa=bF(b),this.os=j)))};$E.prototype.isValid=p("os");$E.prototype.toString=function(){return Ao?"W3C:"+this.Ca.toString()+"\n"+this.Wz+":"+this.xa.toString()+"\n"+this.Yv:"IE:"+this.Ca+","+this.xa};$E.prototype.select=function(){var b=this.se(this.Md.h());b&&(zo&&this.Md.h().focus(),vo(b).select())};
$E.prototype.se=function(b){if(Ao){var c=bE(this.Ca,b),b=bE(this.xa,b);return!c||!b?l:fo(c,this.Wz,b,this.Yv).Pd()}c=b.ownerDocument.body.createTextRange();c.moveToElementText(b);c.collapse(j);c.moveEnd("character",this.xa);c.moveStart("character",this.Ca);return c};
a.bF=function(b){var c=b.duplicate(),d=b.text,e=d.length;c.collapse(j);c.moveEnd("character",e);for(var g,h=10;(g=c.compareEndPoints("EndToEnd",b))&&!(e-=g,c.moveEnd("character",-g),--h,0==h););b=0;for(c=d.indexOf("\n\r");-1!=c;)++b,c=d.indexOf("\n\r",c+1);return e+b};a.cF=function(b,c){Um.call(this,b||gz.N(),c)};A(cF,Um);pj("goog-toolbar-separator",function(){return new cF});a.eF=function(b,c){O.call(this);this.ca=new me(this);this.Md=b;this.ub=c;this.Zy=[];Ph(this.ub,function(b){b.eb&&this.Zy.push(dF(b.Qd()))},this);this.ub.Ke(m);this.ca.e(this.Md,"cvc",this.ET).e(this.ub,"action",this.Nw)};A(eF,Gd);a.dF=function(b){return b};t=eF.prototype;t.m=p("ca");t.tr=p("Md");t.P=function(){return this.ub.P()};t.C=function(b){this.ub.C(b)};t.isEnabled=function(){return this.ub.isEnabled()};t.Za=function(b){this.ub.Za(b)};t.blur=function(){this.ub.Vc(l)};
t.w=function(){eF.n.w.call(this);this.ca&&(this.ca.F(),delete this.ca);this.ub&&(this.ub.F(),delete this.ub);delete this.Md;delete this.Zy};t.ET=function(b){if(this.ub.isEnabled()&&this.dispatchEvent("change")){var c;try{c=this.Md.queryCommandValue(b.UK||this.Zy)}catch(d){c={}}var b=c,e;for(e in b)if(c=Nh(this.ub,e)){var g=b[e];c.wi?c.wi(g):c.$c(!!g)}}};t.Nw=function(b){var c=b.target.Qd();this.Md.execCommand(c,b.target.S())};a.fF=function(b){this.ML=b};A(fF,gd);fF.prototype.type="ok";a.gF=function(b){gd.call(this,"change");this.isValid=b};A(gF,gd);a.hF=function(b){return!b?"":"//www.zhihu.com/equation?tex="+encodeURIComponent(b)};a.iF=function(b){U.call(this,b)};A(iF,U);iF.prototype.pj="";iF.prototype.C=function(b){S(this.h(),b)};a.kF=function(b,c,d,e,g,h,k,n){this.ui=c;this.Ik=k||[];for(var c=n||jF.N(),n=[],d=-d,e=-e,q=0;q<k.length;q++)n.push(M("DIV",{"class":c.L()+"-item",style:"width:"+g+"px;height:"+h+"px;background-position:"+d+"px "+e+"px;"})),d-=g;this.$f=b;vz.call(this,n,c)};A(kF,vz);t=kF.prototype;t.Vh=p("ui");t.tl=function(b){return 0<=b&&b<this.Ik.length?this.Ik[b]:l};t.Sf=function(b){kF.n.Sf.call(this,b);this.$f.dispatchEvent(new lF(mF,this))};
t.Wh=function(b){kF.n.Wh.call(this,b);b.relatedTarget&&!sc(this.h(),b.relatedTarget)&&this.$f.Fv()};t.kd=function(b){kF.n.kd.call(this,b);b.relatedTarget&&!sc(this.h(),b.relatedTarget)&&this.$f.Gv.stop()};a.lF=function(b,c,d){gd.call(this,b,d);this.$Q=c},a.mF="a";lF.prototype.Gw=p("$Q");a.jF=function(){};A(jF,nz);ia(jF);jF.prototype.L=s("ee-palette");a.nF=function(b){kF.call(this,b,"a",0,150,18,18,"\\leftarrow \\rightarrow \\leftrightarrow \\Leftarrow \\Rightarrow \\Leftrightarrow \\uparrow \\downarrow \\updownarrow \\Uparrow \\Downarrow \\Updownarrow".split(" "));zz(this,new Ob(12,1))};A(nF,kF);a.oF=function(b){kF.call(this,b,"c",0,70,18,18,"\\leq \\geq \\prec \\succ \\preceq \\succeq \\ll \\gg \\equiv \\sim \\simeq \\asymp \\approx \\ne \\subset \\supset \\subseteq \\supseteq \\in \\ni \\notin".split(" "));zz(this,new Ob(7,3))};A(oF,kF);a.pF=function(b){kF.call(this,b,"g",0,30,18,18,"\\alpha \\beta \\gamma \\delta \\epsilon \\varepsilon \\zeta \\eta \\theta \\vartheta \\iota \\kappa \\lambda \\mu \\nu \\xi \\pi \\varpi \\rho \\varrho \\sigma \\varsigma \\tau \\upsilon \\phi \\varphi \\chi \\psi \\omega \\Gamma \\Delta \\Theta \\Lambda \\Xi \\Pi \\Sigma \\Upsilon \\Phi \\Psi \\Omega".split(" "));zz(this,new Ob(7,6))};A(pF,kF);a.qF=function(b){kF.call(this,b,"m",0,90,30,56,"x_{a};x^{b};x_{a}^{b};\\bar{x};\\tilde{x};\\frac{a}{b};\\sqrt{x};\\sqrt[n]{x};\\bigcap_{a}^{b};\\bigcup_{a}^{b};\\prod_{a}^{b};\\coprod_{a}^{b};\\left( x \\right);\\left[ x \\right];\\left\\{ x \\right\\};\\left| x \\right|;\\int_{a}^{b};\\oint_{a}^{b};\\sum_{a}^{b}{x};\\lim_{a \\rightarrow b}{x}".split(";"));zz(this,new Ob(10,2))};A(qF,kF);a.sF=function(b){kF.call(this,b,"mn",0,0,46,18,["g","s","c","m","a"],rF.N());zz(this,new Ob(5,1))};A(sF,kF);sF.prototype.C=function(b,c){return sF.n.C.call(this,j,c)};a.rF=function(){};A(rF,jF);ia(rF);rF.prototype.L=s("ee-menu-palette");a.tF=function(b){kF.call(this,b,"s",0,50,18,18,"\\times \\div \\cdot \\pm \\mp \\ast \\star \\circ \\bullet \\oplus \\ominus \\oslash \\otimes \\odot \\dagger \\ddagger \\vee \\wedge \\cap \\cup \\aleph \\Re \\Im \\top \\bot \\infty \\partial \\forall \\exists \\neg \\angle \\triangle \\diamond".split(" "));zz(this,new Ob(7,5))};A(tF,kF);a.uF=function(){O.call(this);this.AG={};this.Om=l;this.M=new me(this);this.Gv=new Id(300);this.M.e(this.Gv,Jd,this.OD)};A(uF,Gd);t=uF.prototype;t.Gw=function(b){var c=this.AG,d=c[b];if(!d){switch(b){case "mn":d=new sF(this);break;case "g":d=new pF(this);break;case "s":d=new tF(this);break;case "c":d=new oF(this);break;case "m":d=new qF(this);break;case "a":d=new nF(this);break;default:f(Error("Invalid palette type!"))}c[b]=d}return d};
t.setActive=function(b){var c=this.Om;c&&c.C(m);this.Om=c=this.Gw(b);c.C(j);return c};t.Fv=function(){this.Gv.start()};t.OD=function(){this.setActive("mn")};t.w=function(){uF.n.w.call(this);this.AG=this.Om=l};a.vF=function(b,c,d){U.call(this,d);this.pj=c;this.$f=b.ZQ};A(vF,iF);t=vF.prototype;t.hF="";t.iv=0;
t.v=function(){var b=z("TeX 公式"),c=z("预览"),d=z("Learn more"),e=this.$,d=e.v("DIV",{style:"display: none;"},e.v("SPAN",{"class":"ee-section-title ee-section-title-floating"},b),this.pj?e.v("A",{id:"ee-section-learn-more",target:"_blank",href:this.pj},d):l,e.v("DIV",{style:"clear: both;"}),b=this.iO=e.v("DIV",{style:"position: relative"}));this.$f.setActive("mn").W(b);b.appendChild(e.v("DIV",{style:"clear:both"}));var g=this.ph=e.v("textarea",{"class":"ee-tex",dir:"ltr"});b.appendChild(g);b.appendChild(e.v("DIV",
{"class":"ee-section-title"},c));c=this.mR=e.v("DIV",{"class":"ee-preview-container"});b.appendChild(c);this.g=d};t.z=function(){this.QH=new tu(this.ph);P(this.QH,"input",this.gE,m,this);this.m().e(this.ph,"keydown",this.gE);this.m().e(this.$f,mF,this.lN,m,this)};t.C=function(b){vF.n.C.call(this,b);b&&Kd(this.YL,0,this)};t.YL=function(){this.ph.focus();Zr(this.ph,this.ph.value.length)};
a.wF=function(b){var c=b.xl();if(c!=b.hF){b.hF=c;var d=!(1024<c.length);b.dispatchEvent(new gF(d));var b=b.mR,e=Sb(b);e.lt(b);c&&(d?c=e.v("IMG",{src:hF(c)}):(c=z("Equation is too long"),c=e.v("DIV",{"class":"ee-warning"},c)),e.appendChild(b,c))}};t.gE=function(){this.iv++;Kd(y(this.yN,this,this.iv),500)};t.yN=function(b){b==this.iv&&wF(this)};
t.lN=function(b){var c=b.Gw(),d=this.$f,e=d.Om,b=this.ph;if("mn"==c.Vh()){var g=c.Eb,g=-1!=g?c.tl(g):l;if(e!=c&&e.Vh()==g){d.OD();return}g&&(c=this.$f.setActive(g),c.h()||c.W(this.iO),c=c.h(),ag(c,0,-c.clientHeight))}else{e=this.$f.Om;g=e.tl(e.Eb);if(!g)return;Kd(y(this.qO,this,g+" "),0)}b.focus()};t.qO=function(b){var c=this.ph,d=Cl(c),e=c.value,e=e.substring(0,d)+b+e.substring(d);c.value=e;Zr(c,d+b.length);wF(this)};t.xl=function(){return this.ph.value};t.xz=function(b){this.ph.value=b;wF(this)};
t.w=function(){this.QH.F();this.$f=l;vF.n.w.call(this)};a.xF=function(b,c,d){U.call(this,d);this.nC=b;this.pj=c};A(xF,U);t=xF.prototype;t.qh=l;t.v=function(){xF.n.v.call(this);this.Nq()};t.Nq=function(){var b=this.h();this.qh=new vF(this.nC,this.pj,this.$);this.H(this.qh);this.qh.W(b);this.qh.C(j)};t.Z=function(b){this.g=b;this.Nq()};t.xl=function(){return this.qh.xl()};t.xz=function(b){this.qh.xz(b)};t.Ew=function(){var b=this.xl(),c=hF(b);return!c?"":'<img src="'+c+'" alt="'+Wa(b)+'" class="ee_img tr_noresize" eeimg="1" style="vertical-align: middle">'};
t.isValid=function(){return 1024<this.xl().length};t.C=function(b){this.qh.C(b)};t.w=function(){this.qh&&this.qh.F();this.nC=l;xF.n.w.call(this)};a.yF=function(b,c,d,e){xE.call(this,c);this.bj=new xF(b,e);this.bj.W();this.bj.xz(d);this.bj.addEventListener("+equation",this.Eo,m,this)};A(yF,xE);yF.prototype.wv=function(){var b=new yE(this),c=z("公式编辑器"),d=z("插入公式"),e=z("保存"),d=this.bj.xl()?e:d;zE(AE(b.Ta(c).Aa(this.bj.h())),d);return CE(b)};yF.prototype.pn=function(){if(this.bj.isValid())return l;var b=this.bj.Ew();return new fF(b)};yF.prototype.Eo=function(b){this.XF||(this.XF=this.yw("ok"));this.XF.disabled=!b.isValid};a.zF=function(b){this.pj=b||"";DE.call(this,"+equation")};A(zF,DE);t=zF.prototype;t.Ea=le("goog.editor.plugins.EquationEditorPlugin");t.jd=mf("EquationEditorPlugin");t.vv=function(b,c){var d=c||l,e;d?(e=d.getAttribute("alt"),e||(e=d.getAttribute("src"),e=!e?"":decodeURIComponent(e.match(we)[6]||l).slice(4)||"")):e="";this.zG=d;d={};d.ZQ=new uF;d=new yF(d,b,e,this.pj);d.addEventListener("ok",this.Pn,m,this);return d};t.enable=function(b){zF.n.enable.call(this,b)};
t.disable=function(b){zF.n.disable.call(this,b)};t.Pn=function(b){FE(this);this.B.Kh();b=ec(jD(this).Ha,b.ML);if(this.zG)mc(b,this.zG);else{var c=yv(this.B);c.isCollapsed()||c.Yc();b=c.insertNode(b,m)}Xr(b,m);this.B.Xe()};a.AF=function(){sE.call(this)};A(AF,sE);z("Equation:");a.BF=z("Edit"),a.CF=z("Remove");t=AF.prototype;t.jd=s("EquationBubble");t.hM=function(b){return b&&"IMG"==b.nodeName&&(b.getAttribute("eeimg")||H.has(b,"ee_img"))?b:l};t.bL=function(b){this.Pq("ee_bubble_edit",BF,this.DL,b,"zg-icon zg-icon-pen");this.Pq("ee_remove_remove",CF,this.FR,b,"zg-icon zg-icon-trash")};t.xw=s("IMG");t.AD=function(){return z("Equation")};t.FR=function(){this.B.Kh();N(this.Rt);vE(this);this.B.Xe()};
t.DL=function(){var b=this.Rt;vE(this);this.B.execCommand("+equation",b)};a.DF=function(b){Wu.call(this);this.yA="http://upload."+eh.km+":"+location.port+"/upload";J.extend(this.D={},this.defaults,b||{})};A(DF,Wu);t=DF.prototype;t.defaults={XX:w};t.jd=mf("FastUpload");
t.enable=function(b){if(!this.isEnabled(b)&&!(!window.URL&&!window.webkitURL||!window.FileReader||!window.FormData||!document.addEventListener)){$.fn.draghover=function(){return this.each(function(){var b=$(),c=$(this),d=j;c.on("dragenter",function(k){k=k.originalEvent;0===b.size()&&(d&&B.contains(k.dataTransfer.types,"Files"))&&c.trigger("draghoverstart",k);b=b.add(k.target)});c.on("dragleave",function(k){setTimeout(function(){b=b.not(k.target);0===b.size()&&d&&c.trigger("draghoverend",k)},1)});
c.on("dragstart",function(){d=m});c.on("drop dragend",function(){b=$();c.trigger("draghoverend");d=j})})};this.KA=$(this.B.h());var c=jD(this),d=$('<div class="editable-dropzone"><div class="row"><div class="cell"><div>拖拽至此处上传</div></div></div></div>');c.Bx(d[0],this.B.h());c=this.GI=d;new me(this);b.h().addEventListener("paste",y(this.bx,this));document.addEventListener("dragover",y(this.NM,this),m);c.on("dragover",y(this.MM,this));c.get(0).addEventListener("drop",y(this.Dr,this),m);$(window).draghover().on({draghoverstart:y(this.RD,
this),draghoverend:y(this.OM,this)});c.draghover().on({draghoverstart:y(this.GM,this),draghoverend:y(this.RD,this)})}};t.NM=function(b){B.contains(b.dataTransfer.types,"Files")&&(b.dataTransfer.dropEffect="none",b.preventDefault())};t.MM=function(b){b=b.originalEvent;b.dataTransfer.dropEffect="copy";b.preventDefault();b.stopPropagation()};t.RD=function(b){b.preventDefault();b.stopPropagation();EF(this,1)};t.GM=function(b){EF(this,2);b.stopPropagation()};
t.OM=function(b){b.preventDefault();EF(this,0)};a.EF=function(b,c){var d=[{display:"none"},{display:"table",width:b.KA.width(),height:b.KA.height(),"background-color":"rgba(255, 255, 255, 0.5)"}];d[2]=$.extend({},d[1],{"background-color":"rgba(245, 245, 245, 0.5)"});b.GI.css(d[c])};t.bx=function(b){var c=this;b.clipboardData&&B.contains(b.clipboardData.types,"Files")&&B.forEach(b.clipboardData.items,function(d){-1<d.type.indexOf("image")&&(FF(c,d.getAsFile()),b.preventDefault())})};
t.Dr=function(b){var c=this;c.B.execCommand("clearlorem");var d=b.dataTransfer.files;document.createElement("img");b.preventDefault();var e=[];B.forEach(d,function(b){-1<b.type.indexOf("image")?(FF(c,b),e.push(j)):e.push(m)});B.every(e,function(b){return!b})&&V("文件类型不支持！");EF(c,0)};
a.FF=function(b,c){var d=new FormData;d.append("via","xhr2");d.append("upload_file",c);var e;e=$.ajaxSettings.xhr();e.withCredentials=j;var g=$.ajax({url:b.yA,data:d,processData:m,contentType:m,xhr:function(){return e},type:"POST"}).done(function(b){"string"===$.type(b)&&(b=JSON.parse(b));if(1===b.code)V(b.msg);else{var c=new Image;c.src=b.msg[0];c.setAttribute("originImgSrc",c.src.replace("_m.jpg","_r.jpg"));c.setAttribute("data-rawWidth",b.msg[1]);c.setAttribute("data-rawHeight",b.msg[2]);g.SA.after(c)}}).fail(function(){V("上传失败！>_<")}).always(function(){g.SA.remove()}),
d=g,h;h=jD(b);var k=h.v("IMG",{"class":"",style:"display:block",src:"http://static.zhihu.com/static/img/spinner2.gif"}),n=yv(b.B);!n||!AD(n)||!sc(b.B.h(),n.Cb())?Qs(b.B.field)?lc(b.B.h(),k,0):b.B.h().appendChild(k):n.cg(k);C||(Xr(k,m),h.Pa().focus());Zu(b.B);h=$(k);d.SA=h};a.GF={},a.MF=function(b,c,d){function e(b){nc(b)}function g(c,d){for(;c!==b;){if(d(c))return c;c=c.parentNode}return l}function h(b){return b.tagName&&b.tagName===c}b||f("Missing Editable Container");c||(c="blockquote");var c=c.toUpperCase(),k=uo();if(k&&HF(b,En(k))&&HF(b,Fn(k))){var n=lD(k.U(),k.ra(),k.ea(),k.Ia()),q;if(k.isCollapsed())q=[];else{var r=k.rc(),v=k.U(),x=k.ea();q=r.childNodes;var F=function(b){return v!==r&&!HF(b,v)},I=function(b){return!(b.previousSibling&&HF(b.previousSibling,x))};
q=Q.toArray(1===q.length?q:Q.fA(Q.BL(q,F),I))}var F=k.Cb(),I=g(F,h),R=B.reduce(q,function(b,d){1===d.nodeType&&(h(d)?b.push(d):b.push.apply(b,B.toArray(d.getElementsByTagName(c))));return b},[]),aa;if(I){if(d)return IF.wu;nc(I)}else if(R.length){if(d)return IF.wu;B.forEach(R,e)}else{if(d)return IF.$A;if(d=g(F,function(b){return B.contains(JF,b.tagName.toLowerCase())}))aa=document.createElement(c),d.parentNode.insertBefore(aa,d),aa.appendChild(d);else if(k.U()!==k.ea())aa=document.createElement(c),
q[0].parentNode.insertBefore(aa,q[0]),B.forEach(q,function(b){aa.appendChild(b)});else{n=c;KF.nJ?document.execCommand("formatBlock",m,n):(d=uo(),k=d.rc(),qa(k)&&1==k.nodeType&&Qs(k)?(n=document.createElement(n),k===b?k.appendChild(n):mc(n,k),(E||D)&&n.appendChild(document.createElement("br")),Ps(n)):(d=d.ea(),d=Hc(d,function(b){return DD(b.parentNode)||qD(b.parentNode)},j),k=Q.fA(new fs(d,j,j),rf(LF)),d=Q.fA(new fs(d,m,m),rf(LF)),k=Q.toArray(k).reverse().concat(Q.toArray(d)),k.length&&(n=document.createElement(n),
d=B.Wd(k),(q=d.nextSibling)&&(q&&"BR"===q.tagName)&&N(q),kc(n,d),hc(n,k),(E||D)&&n.appendChild(document.createElement("br")),Xr(n.lastChild))));return}}n&&(k=function(c,d){return c&&HF(b,c)&&Pr(c)>=d},k(n.U(),n.ra())&&k(n.ea(),n.Ia())&&n.select())}else if(d)return IF.$A},a.LF=function(b){return b&&"BR"===b.tagName||DD(b)||qD(b)},a.HF=function(b,c){return 3===b.nodeType?b===c:b.contains(3===c.nodeType?c.parentNode:c)},a.JF=["ul","ol","dl","table"],a.IF={wu:1,$A:0},a.KF=GF;KF.nJ=!C;KF.toggle=MF;
KF.Rd=function(b,c){return MF(b,c,j)};KF.iJ=IF;a.NF=function(){Wu.call(this)};A(NF,Wu);t=NF.prototype;t.jd=mf("Blockquote");t.Be=function(b){return"+blockquote"===b};t.$e=function(b){this.Be(b)&&GF.toggle(this.B.h())};t.queryCommandValue=function(){return GF.iJ.wu===GF.Rd(this.B.h())};t.$w=function(b){if(13===b.keyCode)return this.Vw(b)};t.Hz=function(b,c){return OF(b,c).Hz};
a.OF=function(b,c){function d(b,c){return{Hz:b,UF:c}}E&&(b.normalize(),c=uo());var e,g=c;e=g.ea();var h=g.Ia(),g=g.rc(),k=g.childNodes.length;3!==e.nodeType&&k&&(e=g.childNodes[h===k?k-1:h]);if(!e)return d(m,l);if(Qs(b))return d(j,b);for(h=e;h!==b;){if(ED(h))return d(m,l);h=h.parentNode}return e&&"BR"===e.tagName&&e.previousSibling&&"BR"===e.previousSibling.tagName?d(j,e):(e=c.Cb())&&1===e.nodeType&&(!e.childNodes.length||Qs(e))?d(j,e):d(m,l)};
t.Vw=function(b){var c=yv(this.B);if(c.isCollapsed()){var d;a:{d=c.ea();for(var e=this.B.field;d!==e;){if("BLOCKQUOTE"===d.tagName)break a;d=d.parentNode}d=i}if(d&&(c=OF(d,c),c.Hz)){b.preventDefault();b=document.createElement("div");kc(b,d);if(E||D)(d=(d=d.nextSibling)&&"BR"===d.tagName&&d)||(d=document.createElement("br")),b.appendChild(d);wo(b,0).select();c.UF&&N(c.UF)}}};VA["+blockquote"]={eb:j,Q:"引用内容",ua:"+blockquote",Ka:"tr-icon tr-blockquote",factory:Wz};a.PF=function(b){U.call(this);J.extend(this.D={},this.defaults,b||{});this.be=l};A(PF,U);
a.QF=[["ABAP",["abap"]],["ActionScript",["as","actionscript"]],["Ada",["ada","ada95ada2005"]],["ANTLR",["antlr"]],["ApacheConf",["apacheconf","aconf","apache"]],["AppleScript",["applescript"]],["AspectJ",["aspectj"]],["Asymptote",["asy","asymptote"]],["AutoHotkey",["ahk"]],["Awk",["awk","gawk","mawk","nawk"]],["BBCode",["bbcode"]],["Base Makefile",["basemake"]],["Bash",["bash","sh","ksh"]],["Batchfile",["bat"]],["Befunge",["befunge"]],["BlitzMax",["blitzmax","bmax"]],["Boo",["boo"]],["Brainfuck",
["brainfuck","bf"]],["Bro",["bro"]],["BUGS",["bugs","winbugs","openbugs"]],["C",["c"]],["CMake",["cmake"]],["c-objdump",["c-objdump"]],["aspx-cs",["aspx-cs"]],["C#",["csharp","c#"]],["Ceylon",["ceylon"]],["CFEngine3",["cfengine3","cf3"]],["Cheetah",["cheetah","spitfire"]],["Clojure",["clojure","clj"]],["CoffeeScript",["coffee-script","coffeescript"]],["Coldfusion HTML",["cfm"]],["cfstatement",["cfs"]],["Common Lisp",["common-lisp","cl"]],["Coq",["coq"]],["C++",["cpp","c++"]],["cpp-objdump",["cpp-objdump",
"c++-objdumb","cxx-objdump"]],["Croc",["croc"]],["CSS",["css"]],["CUDA",["cuda","cu"]],["Cython",["cython","pyx"]],["D",["d"]],["d-objdump",["d-objdump"]],["Darcs Patch",["dpatch"]],["Dart",["dart"]],["Delphi",["delphi","pas","pascal","objectpascal"]],["dg",["dg"]],["Diff",["diff","udiff"]],["Django/Jinja",["django","jinja"]],["DTD",["dtd"]],["Duel","duel;Duel Engine;Duel View;JBST;jbst;JsonML+BST".split(";")],["Dylan",["dylan"]],["ECL",["ecl"]],["eC",["ec"]],["Erlang",["erlang"]],["Elixir",["elixir",
"ex","exs"]],["ERB",["erb"]],["Evoque",["evoque"]],["FSharp",["fsharp"]],["Factor",["factor"]],["Fancy",["fancy","fy"]],["Fantom",["fan"]],["Felix",["felix","flx"]],["Fortran",["fortran"]],["GLSL",["glsl"]],["GAS",["gas"]],["Genshi",["genshi","kid","xml+genshi","xml+kid"]],["Gettext Catalog",["pot","po"]],["Gherkin",["Cucumber","cucumber","Gherkin","gherkin"]],["Gnuplot",["gnuplot"]],["Go",["go"]],["GoodData-CL",["gooddata-cl"]],["Gosu",["gosu"]],["Gosu Template",["gst"]],["Groff",["groff","nroff",
"man"]],["Groovy",["groovy"]],["Haml",["haml","HAML"]],["Haskell",["haskell","hs"]],["haXe",["hx","haXe"]],["HTML",["html"]],["HTTP",["http"]],["Hxml",["haxeml","hxml"]],["Hybris",["hybris","hy"]],["INI",["ini","cfg"]],["Io",["io"]],["Ioke",["ioke","ik"]],["IRC logs",["irc"]],["Jade",["jade","JADE"]],["JavaScript",["js","javascript"]],["JSON",["json"]],["Java",["java"]],["Java Server Page",["jsp"]],["Julia console",["jlcon"]],["Julia",["julia","jl"]],["Kconfig",["kconfig","menuconfig","linux-config",
"kernel-config"]],["Koka",["koka"]],["Kotlin",["kotlin"]],["Lasso",["lasso","lassoscript"]],["Lighttpd configuration file",["lighty","lighttpd"]],["Literate Haskell",["lhs","literate-haskell"]],["LiveScript",["live-script","livescript"]],["LLVM",["llvm"]],["Logtalk",["logtalk"]],["Lua",["lua"]],["MOOCode",["moocode"]],["Makefile",["make","makefile","mf","bsdmake"]],["Mako",["mako"]],["MAQL",["maql"]],["Mason",["mason"]],["Matlab",["matlab"]],["Matlab session",["matlabsession"]],["MiniD",["minid"]],
["Modelica",["modelica"]],["Modula-2",["modula2","m2"]],["MoinMoin/Trac Wiki markup",["trac-wiki","moin"]],["Monkey",["monkey"]],["MoonScript",["moon","moonscript"]],["Mscgen",["mscgen","msc"]],["MuPAD",["mupad"]],["MXML",["mxml"]],["MySQL",["mysql"]],["Myghty",["myghty"]],["NASM",["nasm"]],["Nemerle",["nemerle"]],["NewLisp",["newlisp"]],["Newspeak",["newspeak"]],["Nginx configuration file",["nginx"]],["Nimrod",["nimrod","nim"]],["NumPy",["numpy"]],["objdump",["objdump"]],["Objective-C",["objective-c",
"objectivec","obj-c","objc"]],["Objective-J",["objective-j","objectivej","obj-j","objj"]],["OCaml",["ocaml"]],["Octave",["octave"]],["Ooc",["ooc"]],["Opa",["opa"]],["OpenEdge ABL",["openedge","abl","progress"]],["Perl",["perl","pl"]],["PHP",["php","php3","php4","php5"]],["PL/pgSQL",["plpgsql"]],["PostScript",["postscript"]],["PostgreSQL console (psql)",["psql","postgresql-console","postgres-console"]],["PostgreSQL SQL dialect",["postgresql","postgres"]],["POVRay",["pov"]],["PowerShell",["powershell",
"posh","ps1"]],["Prolog",["prolog"]],["Properties",["properties"]],["Protocol Buffer",["protobuf"]],["Python",["python","py","sage"]],["Python Traceback",["pytb"]],["RConsole",["rconsole","rout"]],["Racket",["racket","rkt"]],["Embedded Ragel",["ragel-em"]],["Rd",["rd"]],["REBOL",["rebol"]],["Redcode",["redcode"]],["RHTML",["rhtml","html+erb","html+ruby"]],["RobotFramework",["RobotFramework","robotframework"]],["reStructuredText",["rst","rest","restructuredtext"]],["Ruby",["rb","ruby","duby"]],["Rust",
["rust"]],["S",["splus","s","r"]],["Standard ML",["sml"]],["Sass",["sass","SASS"]],["Scala",["scala"]],["Scaml",["scaml","SCAML"]],["Scheme",["scheme","scm"]],["Scilab",["scilab"]],["SCSS",["scss"]],["Smali",["smali"]],["Smalltalk",["smalltalk","squeak"]],["Smarty",["smarty"]],["Snobol",["snobol"]],["SourcePawn",["sp"]],["Debian Sourcelist",["sourceslist","sources.list"]],["SQL",["sql"]],["sqlite3con",["sqlite3"]],["SquidConf",["squidconf","squid.conf","squid"]],["Scalate Server Page",["ssp"]],["Stan",
["stan"]],["systemverilog",["sv"]],["Tcl",["tcl"]],["Tcsh",["tcsh","csh"]],["Tea",["tea"]],["TeX",["tex","latex"]],["Text",["text"]],["Treetop",["treetop"]],["UrbiScript",["urbiscript"]],["VGL",["vgl"]],["Vala",["vala","vapi"]],["aspx-vb",["aspx-vb"]],["VB.net",["vb.net","vbnet"]],["Velocity",["velocity"]],["verilog",["v"]],["vhdl",["vhdl"]],["VimL",["vim"]],["XQuery",["xquery","xqy","xq","xql","xqm"]],["XML",["xml"]],["XSLT",["xslt"]],["Xtend",["xtend"]],["YAML",["yaml"]]],a.RF=function(b){return{label:b[0],
value:b[1][0],toString:mf(b[0])}},a.SF=B.map(QF,RF);t=PF.prototype;t.defaults={hS:"lang-select",Iq:"collapsed",TO:"lang-list",UQ:"lang-option",Jk:"active",aC:"checked"};t.w=function(){PF.n.w.call(this);this.m().F();this.Y.F();N(this.g);this.or=this.Ut=this.g=l};t.v=function(){var b=this.D;this.g=M("div",{innerHTML:this.template,className:[b.hS,b.Iq].join(" ")})};t.template='<div class="title-button">选择语言</div><i class="zg-icon zg-icon-double-arrow"></i><div class="input-wrapper"><input class="filter-input zg-form-text-input" placeholder="搜索语言"></div>';
t.z=function(){PF.n.z.call(this);this.Ut=L("title-button",this.g);this.or=L("filter-input",this.g);ug(this.Ut,j);var b=this.or,c=this.g,d=this.D,e=this.m(),g=this,h=g.D,k={},n=new nl(SF,m),c=new im(c,k),q=new El(l,l,m),r=n.eh;n.eh=function(b,c,d){Ma(b)?r.apply(this,arguments):d(b,SF)};k.Zc=function(b,c,d){b=b.data;b.value===g.be&&(H.add(d,h.aC),d.appendChild(M("i","icon "+h.aC)));d.appendChild(document.createTextNode(b.toString()))};var v=new ul(n,c,q);q.Y=v;q.Nk(b);v.Rl=20;e.e(v,"suggestionsupdate",
function(){v.we(v.Bc+0)}).e(v,"update",function(b){this.Dy(b.Xo)}).e(v,"dismiss",function(){this.mi(j)});b=v.K;b.className=d.TO;b.fh=d.UQ;b.$p=d.Jk;this.Y=v;this.m().e(this.g,"click",this.zr).e(this.Ut,"click",this.zN)};t.S=p("be");t.Ba=function(b){var c=b&&B.find(SF,function(c){return c.value===b});c&&(this.jk(c.label),this.dispatchEvent({type:"change",TQ:c}));this.be=b};
t.zr=function(b){var c=this.Y,d=c.K.h();d&&(document.activeElement!==this.or&&!d.contains(b.target))&&(b.preventDefault(),b.stopPropagation(),wl(c))};t.zN=function(){this.isCollapsed()&&this.mi(m)};t.isCollapsed=function(){return H.has(this.g,this.D.Iq)};t.mi=function(b){if(this.isCollapsed()!==b){var c=this.or,d=this.D;b?H.add(this.g,d.Iq):(H.remove(this.g,d.Iq),b=this.Y,d=b.K,b.im(SF),d.h().scrollTop=0,d.show(),c.value="",c.focus())}};t.jk=function(b){var c=this.Ut;c.title=b;xc(c,b)};
t.Dy=function(b){this.Ba(b.value);this.Y.Ac()};a.TF=function(b){Wu.call(this);J.extend(this.D={},this.defaults,b||{});this.cw=this.ub=l};A(TF,Wu);
a.UF=E||rb||D,a.VF=function(b){return"P"===b.tagName},a.WF=function(b){return 3===b.nodeType},a.XF=function(b){return b&&"PRE"===b.tagName},a.YF=function(b){function c(b){return B.contains(g,b)}function d(){var b=document.createTextNode("\n");g.push(b);return b}var e=document.createElement("div");e.innerHTML=b;var g=[],h=rf(c),b=zc(e,DD);(0,B.forEach)(b,function(b){b.lastChild&&"BR"===b.lastChild.tagName&&b.removeChild(b.lastChild);b.firstChild||b.appendChild(document.createTextNode(""));b.insertBefore(d(),
b.firstChild);b.appendChild(d())});b=B.toArray(e.getElementsByTagName("br"));(0,B.forEach)(b,function(b){b!==b.parentNode.lastChild&&mc(document.createTextNode("\n"),b)});e=zc(e,WF);e=qf(function(b){return B.filter(b,function(d,e){var g=b[e-1];return!g||!(c(g)&&c(d))})},function(b){var c=B.kw(b,h);return-1!==c?b.slice(0,c+1):b},function(b){var c=B.jw(b,h);return-1!==c?b.slice(c):b})(e);return(0,B.map)(e,function(b){return b.nodeValue}).join("").replace(/\xa0/g," ")};t=TF.prototype;t.jd=mf("CodePlugin");
t.Be=function(b){return"+code"===b};t.$e=function(b){this.Be(b)&&this.trigger()};t.queryCommandValue=function(){var b="1"===ZF(this).state,c=this.B.Uh("EnterHandler");c&&(b?c.disable(this.B):c.enable(this.B));this.ub&&this.cw&&Ph(this.ub,function(c){c instanceof jz&&c.Za(!b||B.contains(this.cw,c.Qd()))},this);return b};t.defaults={nL:""};t.oS=function(b){this.ub=b;this.cw=["toggleFullScreen"].concat("+code")};t.w=function(){TF.n.w.call(this);this.ub=l};
a.$F=function(b,c,d){for(b=b.B.field;c!==b;){if(d(c))return c;c=c.parentNode}},a.ZF=function(b){var c,d=uo();d&&b.B.field.contains(d.Cb())?(c=d.U(),b=(c=$F(b,c,XF))?"1":"2"):b="0";return{state:b,Oo:d,code:c}};
t.trigger=function(){var b=ZF(this),c=b.Oo,d=b.code;switch(b.state){case "1":var e=!Ma(Gc(d)),b=ED(d);e?(d.parentNode.removeChild(d),b&&Xr(b,j)):(c=c.U()&&c.ea()?new mD(c):l,e=Pa(d.innerHTML),hs(Q.filter(new fs(d,m,j),gs))&&(e="<br>"+e),b&&"BR"!==b.tagName&&(e+="<br>"),b=fc(e),d.parentNode.replaceChild(b,d),c.restore());break;case "2":this.gs(c,Ma(c.Ec())?YF(c.Sd()):UF?"\n":"")}};
t.Pi=function(b,c){var d=document.createElement(b);d.id=Jh(Ih.N());return c(d,function(){d=K(d.id);d.removeAttribute("id");return d})};
t.tg=function(){var b=this.B,c=this.B.field,d,e=new Mq(XF,m,l,c),g=M("div",{style:"display:none"});Ur(e,new Pf(4,0,0,0));e.Kl=new Pf(4,0,0,0)||l;e.Ht=150;e.Qr=100;e.hh(g);e.className="hc-lang-select";P(e,"beforeshow",function(b){d=b.target.anchor;e.Nc(new tq(d,1));if(d.lang){var b=h,c,g=d.lang;(c=(c=B.find(QF,function(b){return b[0]===g||B.contains(b[1],g)}))&&RF(c))&&b.Ba(c.value);h.mi(j)}else h.jk("选择语言")});P(e,"beforehide",function(b){d=l;h.Ba(l);if((b=b.target)&&c.contains(b)&&XF(b))return m});
var h=new PF;h.W(g);P(h,"change",function(b){d&&(d.lang=b.TQ.value,e.C(m))});this.Zp={Dw:mf(e),nX:mf(h),F:function(){e.F();h.F()}};Rc(b,this.Zp);P(b,"delayedchange",this.QR,m,this);P(b.field,"paste",this.bx,m,this)};t.QR=function(){var b=this.Zp&&this.Zp.Dw();b&&(b.P()&&b.anchor)&&b.X()};
t.bx=function(b){var c=ZF(this),d=c.Oo,e=c.code;if("1"===c.state)if(c=b.Vb.clipboardData)c.types&&B.contains(c.types,"text/plain")&&(b.preventDefault(),c=c.getData("text/plain"),b=document.createTextNode(c),d.cg(b),Xr(b));else if(window.clipboardData){if(c=window.clipboardData.getData("Text")){b.preventDefault();var g=c;this.Pi("i",function(b,c){d.cg(b);b=c();g=Ka(g);mc(document.createTextNode(g),b)})}}else{var h=d.ra(),b=d.Ec().length,k=(e.firstChild?Pr(e.firstChild):0)-h-b;setTimeout(function(){var b=
YF(e.innerHTML);xc(e,b);b=(e.firstChild?Pr(e.firstChild):0)-k;e.firstChild&&wo(e.firstChild,Math.max(h,b)).select()})}};
t.$w=function(b){if(13===b.keyCode)return this.Vw(b);if(40===b.keyCode){var c=ZF(this),d=c.Oo,b=c.code;if("1"===c.state){for(var e=c=d.ea(),g=[];e&&e!==b;)g.push([e.parentNode.childNodes.length,B.indexOf(e.parentNode.childNodes,e)]),e=e.parentNode;g=!g.length||B.every(g,function(b){return b[0]===b[1]+1});e=WF(c);if(g&&!(g=!e))e&&(c=c.nodeValue,d=d.Ia(),e=d===c.length||UF&&d===c.length-1&&"\n"===c.slice(-1)),g=e;g&&(ED(b)||kc(document.createElement("br"),b))}}};
t.Vw=function(b){var c=ZF(this),d=c.Oo;if("1"===c.state)return b.preventDefault(),C?this.Pi("i",function(b,c){d.cg(b);setTimeout(function(){var d=document.createTextNode("\r");b=c();mc(d,b);Xr(d)})}):document.queryCommandSupported("insertLineBreak")?document.execCommand("insertLineBreak"):(b=document.createTextNode("\n"),d.insertNode(b),Xr(b)),this.B.Xe(),j};
t.gs=function(b,c){var d=this.D,e;b.Yc();var g;var h=oD(b,j),k=h.aa,n,q=this.B.field;g=$F(this,k,GD(DD,rf(VF)))||q;var r=function(b){return b.parentNode.insertBefore(document.createTextNode(""),b)};if(WF(k)){var v=k.parentNode;!k.nodeValue&&v!==q&&Qs(v)?(n=r(v),k=r(n),v.parentNode.removeChild(v)):n=C&&h.offset===k.length?kc(document.createTextNode(""),k):k.splitText(h.offset)}else"BR"===k.tagName&&(n=k,k=r(k));if(n){for(var x,h=k,k=n;h!=g&&(x=h.parentNode);){n=h;h=k;for(k=x.cloneNode(m);n.nextSibling;)k.appendChild(n.nextSibling);
h&&k.insertBefore(h,k.firstChild);h=x}x=k;n=x.firstChild;hc(g,x.childNodes);g=n}else g=l;g?(e=document.createElement("PRE"),g.parentNode.insertBefore(e,g)):this.Pi("PRE",function(c,d){b.insertNode(c);e=d()});!c&&C&&(c=" ");e.lang=d.nL;xc(e,c);Qs(e)?Ps(e.firstChild):Xr(e.lastChild);d=e;ED(d)||kc(document.createElement("br"),d)};VA["+code"]={eb:j,Q:"插入代码",ua:"+code",Ka:"tr-icon tr-code",factory:Wz};a.aG=function(){Wu.call(this);this.RQ=l};A(aG,Wu);a.bG=/^(DIV|TR|LI|BLOCKQUOTE|H\d|PRE|XMP)/,a.cG=function(b){b.push("<br>")};t=aG.prototype;t.jd=s("RemoveFormatting");t.Be=function(b){return"+removeFormat"==b};t.$e=function(b){"+removeFormat"==b&&!yv(this.B).isCollapsed()&&(b=this.RQ||y(this.ZG,this),dG(this,b),jD(this).Da().execCommand("RemoveFormat",m,i),Mo&&dG(this,function(b){var d=G("528")?/&nbsp;/g:/\u00A0/g;return b.replace(d," ")}))};
t.Hr=function(b,c,d){return!d?m:" "==c?(this.B.execCommand("+removeFormat"),j):m};
a.eG=function(b,c){for(var d=b.B.h();c&&c!=d;){if("TABLE"==c.tagName)return c;c=c.parentNode}return l},a.dG=function(b,c){var d=yv(b.B);if(!(1<d.ij())){if(D){var e=BD(d,b.B.h()),g=eG(b,e.U()),h=eG(b,e.ea());if(g||h){if(g==h)return;var k,n=d;k=g;var d=h,e=new vD(n),q=n.U(),r=n.ra(),v=n.ea(),n=n.Ia(),x=jD(b);if(k){var F=x.createTextNode("");kc(F,k);q=F;r=0}d&&(F=x.createTextNode(""),jc(F,d),v=F,n=0);fo(q,r,v,n).select();k=e;g||(d=N(hD(k,j)),b.Vz=d);h||(d=N(hD(k,m)),b.Xv=d);d=yv(b.B);e=BD(d,b.B.h())}e.select();
d=e}q=d;d=jD(b).v("div");e=q.Pd();Ao?d.appendChild(e.cloneContents()):zo&&(r=q.Ec(),r=r.replace(/\r\n/g,"\r"),v=r.length,q=v-r.replace(/^[\s\xa0]+/,"").length,r=v-Na(r).length,e.moveStart("character",q),e.moveEnd("character",-r),q=e.htmlText,"Formatted"==e.queryCommandValue("formatBlock")&&(q=Pa(e.htmlText)),d.innerHTML=q);q=c(d.innerHTML);x=yv(b.B);d=jD(b);r=db();e=db();q='<span id="'+r+'"></span>'+q+'<span id="'+e+'"></span>';n=db();v='<span id="'+n+'"></span>';if(zo){F=x.te(0).Pd();F.pasteHTML(v);
for(var I;(I=F.parentElement())&&Qs(I)&&!uD(I);){x=I.nodeName;if("TD"==x||"TR"==x||"TH"==x)break;N(I)}F.pasteHTML(q);(n=d.h(n))&&N(n)}else if(Ao){d.Da().execCommand("insertImage",m,n);x=RegExp("<[^<]*"+n+"[^>]*>");I=yv(b.B).Cb();3==I.nodeType&&(I=I.parentNode);for(;!x.test(I.innerHTML);)I=I.parentNode;if(D)I.innerHTML=I.innerHTML.replace(x,q);else{I.innerHTML=I.innerHTML.replace(x,v);for(I=n=d.h(n);(I=n.parentNode)&&Qs(I)&&!uD(I);){x=I.nodeName;if("TD"==x||"TR"==x||"TH"==x)break;kc(n,I);N(I)}I.innerHTML=
I.innerHTML.replace(RegExp(v,"i"),q)}}I=d.h(r);d=d.h(e);fo(I,0,d,d.childNodes.length).select();N(I);N(d);D&&k&&(d=yv(b.B),I=b.B.h(),b.Vz&&(I.insertBefore(b.Vz,I.firstChild),b.Vz=l),b.Xv&&(I.appendChild(b.Xv),b.Xv=l),I=l,e=hD(k,j),q=hD(k,m),e&&q&&(I=fo(e,0,q,0)),lD((g?I:d).U(),(g?I:d).ra(),(h?I:d).ea(),(h?I:d).Ia()).select(),k.F())}};
t.ZG=function(b){var c=document.createElement("div");c.innerHTML=b;for(var b=[],c=[c.childNodes,0],d=[],e=0,g=[],h=0,k=0;0<=k;k-=2){for(var n=m;0<h&&k<=g[h-1];)h--,n=j;n&&cG(b);for(n=m;0<e&&k<=d[e-1];)e--,n=j;n&&cG(b);for(var n=c[k],q=c[k+1];q<n.length;){var r=n[q++],v=r.nodeName,x=this.LD(r);if(x!=l)b.push(x);else{switch(v){case "#text":r=0<e?r.nodeValue:Ja(r.nodeValue);r=Wa(r);b.push(r);continue;case "P":cG(b);cG(b);break;case "BR":cG(b);continue;case "TABLE":cG(b);g[h++]=k;break;case "PRE":case "XMP":d[e++]=
k;break;case "STYLE":case "SCRIPT":case "SELECT":continue;case "A":if(r.href&&""!=r.href){b.push("<a href='");b.push(r.href);b.push("'>");b.push(this.ZG(r.innerHTML));b.push("</a>");continue}else break;case "IMG":b.push("<img src='");b.push(r.src);b.push("'");"0"==r.border&&b.push(" border='0'");b.push(">");continue;case "TD":r.previousSibling&&b.push(" ");break;case "TR":r.previousSibling&&cG(b);break;case "DIV":if(x=r.parentNode,x.firstChild==r&&bG.test(x.tagName))break;default:bG.test(v)&&cG(b)}r=
r.childNodes;0<r.length&&(c[k++]=n,c[k++]=q,n=r,q=0)}}}return b.join("").replace(/\xa0|[ \t]+/g," ")};t.LD=s(l);a.fG=function(){aG.call(this)};A(fG,aG);fG.prototype.LD=function(b){var c;if("IMG"!==b.nodeName)return l;c=[];c.push('<img src="');c.push(Wa(b.src));c.push('"');b.getAttribute("eeimg")&&b.getAttribute("alt")&&c.push(' eeimg="'+Wa(b.getAttribute("eeimg"))+'" alt="'+Wa(b.getAttribute("alt"))+'"');c.push(">");return c.join("")};a.gG=function(b){xE.call(this,b);this.M=new me(this);this.yA="http://upload."+eh.km+":"+location.port+"/upload";this.tK=!C};A(gG,xE);a.hG=function(b){gd.call(this,"ok");var c=b[0];this.Ll=c;this.yG=c.replace("_m.jpg","_r.jpg");this.TG=b[1];this.SG=b[2]};A(hG,gd);t=gG.prototype;t.template=cl('<div class="zm-img-uploader"><iframe src="about:blank" name="av_up_frame" style="position: absolute; height: 0; width: 0; left: -9000px; "></iframe><div class="zg-section zm-img-uploader-tab"><a href="javascript:;" class="tab-nav selected">上传图片</a> 或 <a href="javascript:;" class="tab-nav">引用站外图片</a></div><form class="zg-clear" target="av_up_frame" method="POST" enctype="multipart/form-data" action="<%= uploadURL %>"><div class="tab-content selected <% if (canStylize) { %>inline<% } %>"><% if (canStylize) { %><input type="file" name="upload_file" style="opacity:0;height:0;width:0;font-size:0;position:absolute;"><a href="javascript:;" class="browser zg-btn-blue">选择图片</a><% } else { %><input type="file" name="upload_file"><% } %></div><div class="tab-content"><input type="text" autocomplete="off" name="upload_file_url" class="zm-editable-editor-input zg-form-text-input"><a href="javascript:;" class="insert zg-btn-blue zm-uploader-button-fix">确认</a></div><span style="display: none; " class="zm-img-uploader-loading">正在上传</span><span style="display: none; " class="zm-img-uploader-error">上传图片失败，请稍后重试</span></form><div class="zg-gray">请不要上传与回答问题无关的图片，详细请看 <a href="http://www.zhihu.com/question/20064580" target="_blank">知乎图片使用规范</a></div><div class="zm-command"><a class="cancel" href="javascript:;">取消</a></div></div>');
t.wv=function(){var b=fc(this.template({uploadURL:this.yA,canStylize:this.tK}));J.forEach({form:"form",dA:".zm-img-uploader-tab",bi:".zm-img-uploader-loading",Lf:".zm-img-uploader-error",RH:"input[type=text]",Dn:"input[type=file]",OB:".browser",gv:".cancel",oO:".insert"},function(c,e){this[e]=$(c,b).get(0)},this);this.M.e(X,"iframe_data",this.Ju).e(this.Dn,"change",this.jR).e(this.oO,"click",this.pO).e(this.gv,"click",function(){this.Pw();this.hide()}).e(this.dA,"click",function(b){b=$(b.target);
b.is("a")&&!b.is(".selected")&&iG(this,b.index())});this.kC=b;Vg||(iG(this,1),$(this.dA).replaceWith("<strong>输入站外图片地址：</strong>"));this.OB&&this.M.e(this.OB,"click",function(){this.Dn.click()});var c=new yE(this);c.Ta("插入图片").Aa(this.kC);c=CE(c);ii(c,l);return c};t.jR=function(){if(this.Dn.value){var b=this.Dn.value,b=String(b).toLowerCase();(!b?0:B.some([".jpg",".jpeg",".gif",".png"],function(c){return Ga(b,c)}))?(this.RH.value="",jG(this)):kG(this,"图片不是 .jpg、.png 或 .gif 格式，无法上传。")}};
t.pO=function(){var b=Lk(this.RH.value);b?Fa(b,"http://")?(this.Dn.value="",jG(this)):kG(this,"我们目前不支持该协议。"):kG(this,"请填写图片地址。")};a.iG=function(b,c){function d(b){b.eq(c).addClass("selected").siblings().removeClass("selected")}var e=$(".tab-nav",b.dA),g=$(".tab-content",b.form);S(b.Lf,m);var h=g.eq(c);h.find("input").val("");d(e);d(g);h.find(":text").focus()},a.kG=function(b,c){S(b.bi,m);b.Lf.innerHTML=c;S(b.Lf,j)};t.Ju=function(b){S(this.bi,m);this.kk(b.Kc)};
t.kk=function(b){b&&!b.r?(this.dispatchEvent(this.pn(b.msg)),this.hide()):kG(this,b.msg)};a.jG=function(b){S(b.bi,j);S(b.Lf,m);b.form.submit()};t.pn=function(b){return new hG(b)};t.w=function(){this.M.F();this.M=l;gG.n.w.call(this)};a.lG=function(){DE.call(this,"image");this.M=new me(this)};A(lG,DE);t=lG.prototype;t.jd=mf("ImageDialogPlugin");t.$e=function(b,c){var d=this.B;return!d.kf&&(d.Qf(),!d.kf)?m:lG.n.$e.call(this,b,c)};
t.oj=function(b){if(b&&"mouseup"===b.type){var c=b.target;c&&"IMG"===c.nodeName&&(b=ED(c),b||(b=document.createElement("br"),kc(b,c)),Ps(b))}};t.Ln=function(b){lG.n.Ln.call(this,b)};t.vv=function(b){b=new gG(b);this.M.e(b,"ok",this.Pn).e(b,"cancel",this.Qw);return b};t.w=function(){lG.n.w.call(this);this.M.F()};
t.Pn=function(b){FE(this);var c=jD(this),d;d=b.yG?c.v("IMG",{"class":"origin_image zh-lightbox-thumb","data-original":b.yG,title:"点击查看原图",src:b.Ll}):c.v("IMG",{"class":"content_image",src:b.Ll});b.TG&&d.setAttribute("data-rawwidth",b.TG);b.SG&&d.setAttribute("data-rawheight",b.SG);b=yv(this.B);if(AD(b))b.cg(d),C||(Xr(d,m),c.Pa().focus()),$u(this.B),this.B.Xe();else return l;this.M.removeAll()};t.Qw=function(){this.M.removeAll()};a.mG=function(b){xE.call(this,b);this.M=new me(this)};A(mG,xE);a.nG=function(b,c,d,e,g){gd.call(this,"ok");this.MT=b;this.KT=c;this.LT=g;this.IS=d;this.poster=e};A(nG,gd);t=mG.prototype;t.show=function(){mG.n.show.call(this);this.fu.focus()};t.hide=function(){mG.n.hide.call(this)};
t.wv=function(){var b="http://upload."+eh.km+":"+location.port+"/upload_video",b=this.gd.v("div","zm-img-uploader zm-img-uploader-upload-tab-selected",[this.gd.v("div","zg-section",this.gd.v("strong",l,"输入视频页地址：")),this.fY=this.gd.v("iframe",{id:"video_up_frame",src:"about:_blank",name:"video_up_frame",style:"visible:hidden;position:absolute;height:0;width:0;left:-9000px"}),this.uD=this.gd.v("form",{"class":"zg-section-title",target:"video_up_frame",method:"post",enctype:"multipart/form-data",action:b},
[this.fu=this.gd.v("input",{type:"text","class":"zg-form-text-input",name:"upload_file_url",autocomplete:"off"}),this.Yk=this.gd.v("a",{"class":"zg-btn-blue zm-uploader-button-fix",name:"save",href:"javascript:;"},"确定"),this.gd.v("div","zm-video-uploader-info",[this.bi=this.gd.v("span",{style:"display:none","class":"zm-img-uploader-loading"},"正在上传"),this.Lf=this.gd.v("span",{style:"display:none","class":"zm-img-uploader-error"},"插入视频失败，请稍后重试")])]),this.ZN=this.gd.v("div","zg-gray"),this.kn=this.gd.v("div",
"zm-command",[this.gv=this.gd.v("a",{href:"javascript:;"},"取消")])]);this.ZN.innerHTML='我们目前支持<a class="zg-link-gray" target="_blank" href="http://youku.com">优酷</a>、<a class="zg-link-gray" target="_blank" href="http://tudou.com">土豆</a>、<a href="http://video.sina.com.cn/" class="zg-link-gray" target="_blank">新浪</a>、<a href="http://v.qq.com/" class="zg-link-gray" target="_blank">腾讯</a>、<a href="http://www.56.com/" class="zg-link-gray" target="_blank">56</a>、<a href="http://tv.sohu.com/" class="zg-link-gray" target="_blank">搜狐</a>、<a href="http://www.iqiyi.com/" class="zg-link-gray" target="_blank">爱奇艺</a>视频服务。<br />请不要上传与回答问题无关的视频，详细请看 <a href="http://www.zhihu.com/question/20118966" target="_blank">知乎视频使用规范</a>';
this.M.e(this.gv,"click",function(){this.Pw();this.hide()}).e(this.Yk,"click",this.KG).e(this.kn,"click",this.ta).e(this.uD,"submit",function(){return oG(this,this.fu.value)}).e(X,"iframe_data",this.Ju);this.kC=b;var c=new yE(this);c.Ta("插入视频").Aa(b);b=CE(c);ii(b,l);return b};a.oG=function(b,c){c=Lk(c);if(!c)return m;var d=c.match(/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi);d||(S(b.bi,m),b.Lf.innerHTML="我们无法识别你输入的视频页地址",S(b.Lf,j));return d};
t.KG=function(){if(this.fu.value){var b=Lk(this.fu.value);b&&oG(this,b)&&(S(this.bi,j),S(this.Lf,m),this.uD.submit())}};t.ta=function(b){"save"===(b.target&&b.target.name)&&this.KG()};t.Ju=function(b){S(this.bi,m);this.kk(b.Kc)};t.kk=function(b){b&&!b.r?(this.dispatchEvent(this.pn(b.msg[0],b.msg[1],b.msg[2],b.msg[3],b.msg[4])),this.hide()):(b=b.msg,S(this.bi,m),this.Lf.innerHTML=b,S(this.Lf,j))};t.pn=function(b,c,d,e,g){return new nG(b,c,d,e,g)};t.w=function(){this.M.F();this.M=l;mG.n.w.call(this)};
a.pG=function(){DE.call(this,zD);this.M=new me(this)};A(pG,DE);t=pG.prototype;t.jd=mf("VideoDialogPlugin");t.$e=function(b,c){var d=this.B;return!d.kf&&(d.Qf(),!d.kf)?m:pG.n.$e.call(this,b,c)};t.Ln=function(b){pG.n.Ln.call(this,b)};t.vv=function(b){b=new mG(b);this.M.e(b,"ok",this.Pn).e(b,"cancel",this.Qw);return b};t.w=function(){pG.n.w.call(this);this.M.F()};
t.Pn=function(b){FE(this);var c=jD(this),d=c.v("embed");J.forEach({type:"application/x-shockwave-flash",allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque","class":"video",width:"420",height:"350",src:b.MT,"data-poster":b.poster,"data-name":b.LT,"data-videoid":b.KT,"data-sourceurl":b.IS},function(b,c){d.setAttribute(c,b)});b=Tr(d);Ga(b,'">')&&(b+="</embed>");var b=fc(b+" "),e=b.firstChild,g=yv(this.B);if(AD(g))g.cg(b),C?document.selection&&(c=document.selection.createRange(),c.move("character",
-1),c.select()):(Xr(e),c.Pa().focus()),$u(this.B),this.B.Xe();else return l;this.M.removeAll()};t.Qw=function(){this.M.removeAll()};a.Rs=j,a.qG=Wu.prototype.execCommand;Wu.prototype.execCommand=function(b){var c=this.B;return J.contains(KD,b)&&!c.kf?(c.Qf(),m):qG.apply(this,arguments)};a.rG=DE.prototype.execCommand,a.sG=["+equation"];DE.prototype.execCommand=function(b){var c=this.B;return B.contains(sG,b)&&!c.kf&&(c.Qf(),!c.kf)?m:rG.apply(this,arguments)};zD="video";FD=kb?"⌘":"ctrl";VA[zD]={ua:zD,Q:"插入视频",Ka:"tr-icon tr-video",factory:Vz};VA["+equation"]={ua:"+equation",Q:aA.lV,Ka:"tr-icon tr-equation",factory:Vz};
VA["+bold"].Q="粗体 ("+FD+"+b)";VA["+italic"].Q="斜体 ("+FD+"+i)";VA["+underline"].Q="下划线 ("+FD+"+u)";VA["+superscript"].Q="引用内容";VA["+insertOrderedList"].Q="有序列表";VA["+insertUnorderedList"].Q="无序列表";VA["+removeFormat"].Q="清除格式";VA.image.Q="插入图片";VA[zD].Q="插入视频";VA["+equation"].Q="插入公式";a.tG=function(){};ia(tG);
tG.prototype.Ag=function(b,c){this.config=c;var d,e,g;e=L("zm-editable-toolbar-container",b);d=L("zm-editable-editor-outer",b);g=L("zm-editable-editor-field-element",b);var h=new Ev(g.id);h.kK=89;var k=[];c.enableFullScreen&&k.push("toggleFullScreen");k.push("+bold","+italic","+underline",new cF,"+blockquote","+code","+insertOrderedList","+insertUnorderedList","+equation");c.canUploadMedia_&&k.push(new cF,"image",zD);c.useRemoveFormat_&&k.push(new cF,"+removeFormat");var n=Sb(e);g=[];for(var q=0,
r;r=k[q];q++){if(na(r)){var v=i;if(r=VA[r]){var v=r.factory||Wz,x=r.ua,F=r.Q,I=r.caption,R=r.Ka,aa=n||Sb(),v=v(x,F,I,R,l,aa);r.eb&&(v.eb=j)}r=v}r&&g.push(r)}var k=Sb(e),ta=new tD(hz.N(),Xm,k),k=fg(e);ta.pi(k);ta.Ke(m);for(n=0;q=g[n];n++)uj(q,32,m),q.pi(k),ta.H(q,j);ta.W(e);new eF(h,ta);Rc(h,ta);iD(h,new JD);iD(h,new SE);if(c.loremIpsum_&&(iD(h,new TE(c.loremIpsum_)),D))h.on("load",function(){wd(h.h(),"focus",function(){h.execCommand("clearlorem",j)})});iD(h,new cE);iD(h,new fG);iD(h,new XE);e=new TF;
iD(h,e);iD(h,new lG);iD(h,new pG);iD(h,new DF);iD(h,new zF);iD(h,new AF);iD(h,new NF);c.enableFullScreen&&(d=new ZA({title:"写作模式",uk:d}),iD(h,d));h.on("load",function(){c.useScraper_&&this.es(h,ta)},m,this);return[h,ta]};tG.prototype.es=function(b,c){var d=b.h(),e=new Sv;e.o(d);var g=M("div",{style:"display:none",className:"tr-spinner spinner-gray"});c.h().appendChild(g);e.on("willScrape",function(){S(g,j)}).on("didScrape",function(){S(g,m)});Rc(b,e)};
Da("ZH.createRichTextEditor",function(b,c){return tG.N().Ag(b,c)});Jf("rich_text_editor");}})(zhihu);
//@ sourceURL=http://static.zhihu.com/static/compiled/rich_text_editor.js